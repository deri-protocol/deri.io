{"version":3,"sources":["pages/Retired/Retired.js"],"names":["inject","observer","lang","wallet","poolManager","curTabPool","setCurTabPool","useState","curOpen","setCurOpen","poolTitle","setPoolTitle","nowPool","setNowPool","checkedStaked","setCheckedStaked","stakedAmmList","setStakedAmmList","stakedLpList","setStakedLpList","useEffect","isConnected","async","filterPools","ammPools","lpPools","arr","Promise","all","map","params","item","chainId","address","detail","account","apiProxy","request","isStaked","filter","p","ammArr","type","lpArr","getStakedPools","load","retiredPools","pools","className","rel","target","href","index","pool"],"mappings":"2IAAA,4EAuGeA,sBAAO,SAAU,cAAjBA,CAAgCC,aAhG/C,YAAsD,IAArC,KAAEC,EAAF,OAAQC,EAAS,GAAjB,YAAqBC,GAAe,EACnD,MAAOC,EAAYC,GAAiBC,mBAAS,QACtCC,EAASC,GAAcF,oBAAS,IAChCG,EAAWC,GAAgBJ,mBAASL,EAAK,qBACzCU,EAASC,GAAcN,mBAAS,KAChCO,EAAeC,GAAoBR,oBAAS,IAC5CS,EAAeC,GAAoBV,mBAAS,KAC5CW,EAAcC,GAAmBZ,mBAAS,IA0CjD,OApBAa,qBAAU,KACJjB,EAAOkB,eApBUC,WACrB,IAAIC,EAAc,IAAInB,EAAYoB,YAAapB,EAAYqB,SACvDC,QAAYC,QAAQC,IAAIL,EAAYM,KAAIP,UAC1C,IAAIQ,EAAS,CAACC,EAAKC,QAASD,EAAKE,QAAS9B,EAAO+B,OAAOC,SAExD,eADgBC,IAASC,QAAQ,mBAAoBP,IAC7CQ,UACCP,MAKXL,EAAMA,EAAIa,QAAOC,GAAKA,IACtB,IAAIC,EAASf,EAAIa,QAAOC,GAAgB,OAAXA,EAAEE,OAC3BC,EAAQjB,EAAIa,QAAOC,GAAgB,OAAXA,EAAEE,OAC9BzB,EAAiBwB,GACjBtB,EAAgBwB,IAMdC,KAED,CAACzC,EAAO+B,OAAQ9B,EAAaC,IAEhCe,qBAAU,KAENT,EADEH,EACWN,EAAK,mBAELA,EAAK,sBAEnB,CAACM,IACJY,qBAAU,KACRhB,EAAYyC,SACX,IAEHzB,qBAAU,KACRP,EAAWT,EAAY0C,gBACtB,CAAC1C,EAAY2C,QAEd,qBAAKC,UAAU,WAAf,SACE,qBAAKA,UAAU,YAAf,SACE,sBAAKA,UAAU,OAAf,UACE,qBAAKA,UAAU,mBAAf,SACE,sBAAKA,UAAU,aAAf,UACE,qBAAKA,UAAU,kBAAf,SACGtC,IAEH,sBAAKsC,UAAU,yBAAf,WACIxC,GAAW,qCACX,qBAAKwC,UAAU,gBAAf,SACG9C,EAAK,wBAER,qBAAK8C,UAAU,gBAAf,SACG9C,EAAK,2BAGTM,GAAW,qCACV,qBAAKwC,UAAU,gBAAf,SACG9C,EAAK,6BAER,qBAAK8C,UAAU,gBAAf,SACG9C,EAAK,wCAOhB,sBAAK8C,UAAU,qBAAf,UACE,qBAAKA,UAAU,eAAf,SACE,wDAA0B,mBAAGC,IAAI,aAAaC,OAAO,SAASC,KAAK,0CAAzC,qBAA1B,MAA2H,mBAAGF,IAAI,aAAaC,OAAO,SAASC,KAAK,0CAAzC,uCAA3H,sFACd,uBADc,+CACuC,mBAAGF,IAAI,aAAaC,OAAO,SAASC,KAAK,8BAAzC,kBADvC,wDAIF,qBAAKH,UAAU,YAAf,SACGpC,EAAQiB,KAAI,CAACE,EAAMqB,IAAU,cAAC,IAAD,CAAMjD,OAAQA,EAAQD,KAAMA,EAAMmD,KAAMtB,GAAWqB,OAEnF,qBAAKJ,WAAS","file":"static/js/30.7800dda7.chunk.js","sourcesContent":["import { useState, useEffect } from \"react\"\nimport { inject, observer } from 'mobx-react';\nimport Card from \"../../pages/Pool/Card\"\nimport apiProxy from '../../model/ApiProxy'\nimport selectIcon from '../../assets/img/arrow-down.svg'\nimport '../../pages/Pool/pool.less'\nimport './retired.less'\nfunction Retired({ lang, wallet = {}, poolManager }) {\n  const [curTabPool, setCurTabPool] = useState('amm');\n  const [curOpen, setCurOpen] = useState(false);\n  const [poolTitle, setPoolTitle] = useState(lang['deri-pool-title'])\n  const [nowPool, setNowPool] = useState([]);\n  const [checkedStaked, setCheckedStaked] = useState(false)\n  const [stakedAmmList, setStakedAmmList] = useState([])\n  const [stakedLpList, setStakedLpList] = useState([])\n\n\n  const getStakedPools = async () => {\n    let filterPools = [...poolManager.ammPools, ...poolManager.lpPools];\n    let arr = await Promise.all(filterPools.map(async (item) => {\n      let params = [item.chainId, item.address, wallet.detail.account]\n      let res = await apiProxy.request('getUserStakeInfo', params)\n      if (res.isStaked) {\n        return item\n      } else {\n        return false\n      }\n    }))\n    arr = arr.filter(p => p)\n    let ammArr = arr.filter(p => p.type !== 'lp')\n    let lpArr = arr.filter(p => p.type === 'lp')\n    setStakedAmmList(ammArr)\n    setStakedLpList(lpArr)\n  }\n\n\n  useEffect(() => {\n    if (wallet.isConnected()) {\n      getStakedPools()\n    }\n  }, [wallet.detail, poolManager, curTabPool])\n\n  useEffect(() => {\n    if (curOpen) {\n      setPoolTitle(lang['open-pool-title'])\n    } else {\n      setPoolTitle(lang['deri-pool-title'])\n    }\n  }, [curOpen])\n  useEffect(() => {\n    poolManager.load()\n  }, [])\n\n  useEffect(() => {\n    setNowPool(poolManager.retiredPools)\n  }, [poolManager.pools])\n  return (\n    <div className='pool-box'>\n      <div className='pool-info'>\n        <div className='left'>\n          <div className='left-header-info'>\n            <div className='pool-title'>\n              <div className='pool-title-text'>\n                {poolTitle}\n              </div>\n              <div className='pool-title-select-text'>\n                {!curOpen && <>\n                  <div className='pool-test-des'>\n                    {lang['pool-title-des-one']}\n                  </div>\n                  <div className='pool-test-des'>\n                    {lang['pool-title-des-two']}\n                  </div>\n                </>}\n                {curOpen && <>\n                  <div className='pool-test-des'>\n                    {lang['open-pool-title-des-one']}\n                  </div>\n                  <div className='pool-test-des'>\n                    {lang['open-pool-title-des-two']}\n                  </div>\n                </>}\n              </div>\n\n            </div>\n          </div>\n          <div className='pool-card-claim-bg'>\n            <div className='retired-hint'>\n              <div>Several V2 markets ( <a rel=\"noreferrer\" target=\"_blank\" href=\"https://deri.io/#/trade/options/retired\">Options</a> , <a rel=\"noreferrer\" target=\"_blank\" href=\"https://deri.io/#/trade/futures/retired\">Fut Main &amp; Fut Inno-BUSD </a> pools) are no longer supported, please close position and remove your collaterals.\n<br></br> For V1 and Premining markets, please visit <a rel=\"noreferrer\" target=\"_blank\" href='https://v2deri.io/#/retired'>here</a>  to close position and remove your collaterals.</div>\n            </div>\n\n            <div className='pool-card'>\n              {nowPool.map((item, index) => <Card wallet={wallet} lang={lang} pool={item} key={index} />)}\n            </div>\n            <div className></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default inject('wallet', 'poolManager')(observer(Retired))"],"sourceRoot":""}