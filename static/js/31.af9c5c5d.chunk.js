(this["webpackJsonpderi-client"]=this["webpackJsonpderi-client"]||[]).push([[31],{1383:function(e,a,t){"use strict";var c,n,i=t(22),l=t(325),s=t(54),d=t(9),r=t(63),o=t(8),j=(t(77),t(1429)),u=t(57),b=t(19),v=t(17),h=t(4),O=["allowZero","wallet","closeShowLoadingEffectAfterLoaded","defaultValue"],f=Object(u.a)(j.a)(c||(c=Object(r.a)(["\n  width : ","px;\n"])),(function(e){return e.width})),m=u.a.span(n||(n=Object(r.a)(["\n  width : ",";\n  height : ",";\n"])),(function(e){return/px$/.test(e.width)?e.width:"".concat(e.width,"px")}),(function(e){return/px$/.test(e.height)?e.height:"".concat(e.height,"px")}));a.a=function(e){var a=Object(o.useState)(Object(h.jsx)("span",{className:"loading-line"})),t=Object(d.a)(a,2),c=t[0],n=t[1],r=Object(o.useState)(!0),j=Object(d.a)(r,2),u=j[0],x=j[1],p=function(){var a=e.allowZero;return"object"!==Object(s.a)(e.value)&&void 0!==e.value&&""!==e.value&&!isNaN(e.value)&&"NaN"!==e.value||0===Math.abs(e.value)&&!0===a},N=function(e){return e&&e.replace(/\.$/,"")};return Object(o.useEffect)((function(){var a=e.allowZero,t=(e.wallet,e.closeShowLoadingEffectAfterLoaded),c=e.defaultValue,s=void 0===c?"--":c,d=Object(l.a)(e,O);if(p())d.decimalScale>0&&d.value&&/\d+\.0*[1-9]+/.test(d.value)&&!a&&0===+Object(v.bg)(d.value).toFixed(+d.decimalScale||2)&&(d.decimalScale=Object(b.f)(Math.abs(d.value))+2),(-1===d.decimalScale||0===+d.value&&a)&&delete d.decimalScale,d.value=/e(\+|=)?/.test(d.value)?Object(b.L)(d.value):""+d.value,d.value&&/\d+.9{6}/.test(d.value)&&(d.value=(+d.value).toFixed(5)),n(Object(h.jsx)(f,Object(i.a)(Object(i.a)({},d),{},{renderText:N,displayType:"text",fixedDecimalScale:!0,thousandSeparator:!0})));else if(u){var r=e.width,o=e.height;n(Object(h.jsx)(m,{className:"loading-line",width:r,height:o})),t&&x(!1)}var j=window.setTimeout((function(){p()||n(s)}),s===d.value?0:6e4);return function(){clearTimeout(j)}}),[e.value,e.decimalScale,e.suffix]),c}},2362:function(e,a,t){},2575:function(e,a,t){"use strict";t.r(a);var c=t(21),n=t(63),i=t(2),l=t(9),s=t(0),d=t.n(s),r=t(8),o=t(48),j=t(76),u=t.n(j),b=t(1383),v=(t(2362),t(26)),h=t(250),O=new(0,t(250).GraphQLClient)("https://graph.deri.io/graphql",{});function f(e,a){return O.request(e,a)}var m,x=t(19),p=t(4);a.default=Object(o.b)("wallet")(Object(o.c)((function(e){var a=e.wallet,t=void 0===a?{}:a,s=Object(r.useState)([]),o=Object(l.a)(s,2),j=o[0],O=o[1],N=Object(r.useState)([]),w=Object(l.a)(N,2),g=w[0],S=w[1],y=Object(r.useState)(30),k=Object(l.a)(y,2),T=k[0],$=k[1],L=Object(r.useState)(30),D=Object(l.a)(L,2),C=D[0],I=D[1],A=Object(r.useState)({}),E=Object(l.a)(A,2),P=E[0],q=E[1],F=function(){var e=Object(i.a)(d.a.mark((function e(){var a,t,c,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(h.gql)(m||(m=Object(n.a)(["\n      query ($chainId: Int!) {\n        accountDailyPnl(where: { chainId: $chainId }) {\n          chainId\n          account\n          fee\n          notional\n          pnl\n          timestamp\n        }\n      }\n    "]))),t={chainId:56},e.next=4,f(a,t);case 4:(c=e.sent).accountDailyPnl.length&&(i=c.accountDailyPnl,S(i));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(e,a){var t=86400*a,n=new Date,i=parseInt(String(n.getTime()/1e3-t-1)),l=e.filter((function(e){return e.timestamp>i})),s=l.map((function(e){return e.account}));return Object(c.a)(new Set(s)).map((function(e){var a={account:e,fee:0,notional:0,pnl:0};l.filter((function(a){return a.account===e})).map((function(e){a.pnl=Object(x.a)(a.pnl).plus(e.pnl).toNumber(),a.fee=Object(x.a)(a.fee).plus(e.fee).toNumber(),a.notional=Object(x.a)(a.notional).plus(e.notional).toNumber()}));return a}))};return Object(r.useEffect)((function(){F()}),[]),Object(r.useEffect)((function(){if(g.length){var e=Y(g,C).sort((function(e,a){return a.pnl-e.pnl}));e=e.splice(0,50),O(e)}}),[C,g]),Object(r.useEffect)((function(){if(g.length&&t.account){var e=Y(g,T).find((function(e){return e.account===t.account}));e&&q(e)}}),[T,g,t.chainId,t.account]),Object(p.jsx)("div",{className:"Leaderboard",children:Object(p.jsxs)("div",{className:"Leaderboard-box",children:[Object(p.jsxs)("div",{className:"my-historical-trading",children:[Object(p.jsxs)("div",{className:"title-tab-day",children:[Object(p.jsx)("div",{className:"title-leaderboard",children:"My Historical Trading Performance"}),Object(p.jsxs)("div",{className:"tab-day",children:[Object(p.jsx)("div",{className:u()("day-btn",{active:70===T}),onClick:function(){$(70)},children:"70 DAYS"}),Object(p.jsx)("div",{className:u()("day-btn",{active:30===T}),onClick:function(){$(30)},children:"30 DAYS"})]})]}),Object(p.jsxs)("div",{className:"my-info-list",children:[Object(p.jsxs)("div",{className:"info-box",children:[Object(p.jsxs)("div",{className:"info-num",children:[" ",Object(p.jsx)(b.a,{prefix:"$ ",value:P.notional,decimalScale:2})]}),Object(p.jsx)("div",{className:"info-title",children:" Notional "})]}),Object(p.jsxs)("div",{className:"info-box",children:[Object(p.jsx)("div",{className:"info-num",children:Object(p.jsx)(b.a,{prefix:"$ ",value:P.fee,decimalScale:2})}),Object(p.jsx)("div",{className:"info-title",children:" Transaction Fee "})]}),Object(p.jsxs)("div",{className:"info-box",children:[Object(p.jsxs)("div",{className:"info-num",children:[" ",Object(p.jsx)(b.a,{prefix:"$ ",value:P.pnl,decimalScale:2})]}),Object(p.jsx)("div",{className:"info-title",children:" PNL "})]})]})]}),Object(p.jsxs)("div",{className:"rankings",children:[Object(p.jsxs)("div",{className:"rankings-title-tab-day",children:[Object(p.jsx)("div",{className:"rankings-title",children:"Rankings"}),Object(p.jsxs)("div",{className:"tab-day",children:[Object(p.jsx)("div",{className:u()("day-btn",{active:70===C}),onClick:function(){I(70)},children:"70 DAYS"}),Object(p.jsx)("div",{className:u()("day-btn",{active:30===C}),onClick:function(){I(30)},children:"30 DAYS"})]})]}),Object(p.jsxs)("div",{className:"rankings-list-title",children:[Object(p.jsx)("div",{className:"rank",children:"Rank"}),Object(p.jsx)("div",{className:"trade",children:"Trade"}),Object(p.jsx)("div",{className:"notional",children:"Notional"}),Object(p.jsx)("div",{className:"transaction-fee",children:"Transaction Fee"}),Object(p.jsx)("div",{className:"pnl",children:"PNL"})]}),Object(p.jsx)("div",{className:"rankings-list-num",children:j.map((function(e,a){return Object(p.jsxs)("div",{className:"rankings-list-num-box",children:[Object(p.jsxs)("div",{className:"rank",children:[a+1===1&&Object(p.jsx)(v.a,{token:"topOne",width:void 0,height:void 0,secondary:void 0,className:void 0,onClick:void 0}),a+1===2&&Object(p.jsx)(v.a,{token:"topTwo",width:void 0,height:void 0,secondary:void 0,className:void 0,onClick:void 0}),a+1===3&&Object(p.jsx)(v.a,{token:"topThree",width:void 0,height:void 0,secondary:void 0,className:void 0,onClick:void 0}),a+1>3&&Object(p.jsx)("span",{className:"top-num",children:a+1})]}),Object(p.jsx)("div",{className:"trade",children:Object(x.k)(e.account)}),Object(p.jsxs)("div",{className:"notional",children:["$"," ",Object(p.jsx)(b.a,{value:e.notional,displayType:"text",decimalScale:2})]}),Object(p.jsxs)("div",{className:"transaction-fee",children:["$"," ",Object(p.jsx)(b.a,{value:e.fee,displayType:"text",decimalScale:2})]}),Object(p.jsxs)("div",{className:u()("pnl",{up:+e.pnl>0,down:+e.pnl<0}),children:[+e.pnl>0?"+":"",Object(p.jsx)(b.a,{value:e.pnl,displayType:"text",decimalScale:2,prefix:"$ "})]})]},a)}))})]})]})})})))}}]);
//# sourceMappingURL=31.af9c5c5d.chunk.js.map