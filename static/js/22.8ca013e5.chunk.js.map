{"version":3,"sources":["utils/DeriNumberFormat.js","pages/Pool/img/staked.svg","pages/Pool/img/close.svg","pages/Pool/Card.js","pages/Retired/Retired.js"],"names":["Wrapper","styled","NumberFormat","props","width","LoadLine","span","test","height","DeriNumberFormat","useState","className","renderablity","setRenderablity","firstTime","setFirstTime","isValidate","allowZero","value","undefined","isNaN","Math","abs","renderText","replace","useEffect","closeShowLoadingEffectAfterLoaded","wallet","defaultValue","others","decimalScale","bg","toFixed","countDecimal","toNonExponential","displayType","fixedDecimalScale","thousandSeparator","timeout","window","setTimeout","clearTimeout","suffix","Card","lang","pool","history","useHistory","poolInfo","setPoolinfo","isStaked","setIsStaked","xvsNum","setXvsNum","setShow","getPoolInfo","a","address","chainId","res","getVenusEarned","version","getIsStaked","onImgError","event","target","src","errorimg","isConnected","detail","account","sess","sessionStorage","getItem","url","type","onClick","push","staking","retired","new","alt","BSC","POLYGON","ETH","ARBITRUM","networkLogo","zone","chain","toUpperCase","isLp","bTokens","bTokenSymbol","map","item","index","onError","singleBtoken","apy","liquidity","stakedLogo","Button","disabled","outline","label","TokenWrapper","div","Token","rotate","TokenExplode","angle","length","filter","t","i","token","curRotate","inject","observer","poolManager","curTabPool","curOpen","poolTitle","setPoolTitle","nowPool","setNowPool","setStakedAmmList","setStakedLpList","getStakedPools","filterPools","ammPools","lpPools","Promise","all","params","apiProxy","request","arr","p","ammArr","lpArr","load","retiredPools","pools","rel","href"],"mappings":"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","file":"static/js/22.8ca013e5.chunk.js","sourcesContent":["import React,{useState,useEffect,useRef} from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport NumberFormat from 'react-number-format'\r\nimport { inject, observer } from 'mobx-react';\r\nimport styled from 'styled-components';\r\nimport { toNonExponential,countDecimal } from './utils';\r\nimport { bg } from '../lib/web3js';\r\nconst Wrapper = styled(NumberFormat)`\r\n  width : ${props => props.width}px;\r\n`\r\nconst LoadLine = styled.span`\r\n  width : ${props => /px$/.test(props.width) ? props.width : `${props.width}px`};\r\n  height : ${props => /px$/.test(props.height) ? props.height : `${props.height}px`};\r\n`\r\nfunction DeriNumberFormat(props){\r\n  const [renderablity, setRenderablity] = useState(<span className='loading-line'></span>);\r\n  const [firstTime, setFirstTime] = useState(true)\r\n  const isValidate = () => {\r\n    const {allowZero} = props \r\n    return (typeof props.value !== 'object' && props.value !== undefined && props.value !== ''  && !isNaN(props.value) && props.value !== 'NaN') \r\n          || ((Math.abs(props.value)) === 0 && allowZero === true )\r\n  }\r\n  const renderText = value => value && value.replace(/\\.$/,'')\r\n\r\n  useEffect(() => {\r\n    const {allowZero,wallet,closeShowLoadingEffectAfterLoaded,defaultValue = '--',...others} = props \r\n\r\n    if(isValidate()) {\r\n      //如果精度截取之后为0，则动态获取精度，取到不为0为止\r\n      if(others.decimalScale > 0 && others.value && /\\d+\\.0*[1-9]+/.test(others.value) && !allowZero && (+bg(others.value).toFixed((+others.decimalScale || 2))) === 0){\r\n        others.decimalScale = countDecimal(Math.abs(others.value)) + 2\r\n      } \r\n\r\n      if(others.decimalScale === -1 || ((+others.value) === 0 && allowZero)){\r\n        delete others.decimalScale\r\n      }\r\n\r\n      others.value = /e(\\+|=)?/.test(others.value) ? toNonExponential(others.value) : ''+others.value\r\n      if(others.value && /\\d+.9{6}/.test(others.value)){\r\n        others.value = (+others.value).toFixed(5)\r\n      }\r\n      setRenderablity(<Wrapper {...others}  renderText={renderText}\r\n      displayType = 'text'  fixedDecimalScale={true} thousandSeparator={true}/>)\r\n    } else if(firstTime){\r\n      const {width,height} = props\r\n      setRenderablity(<LoadLine className='loading-line' width={width} height={height}></LoadLine>)\r\n      if(closeShowLoadingEffectAfterLoaded){\r\n        setFirstTime(false)\r\n      }\r\n    } \r\n    const timeout = window.setTimeout(() => {\r\n      // && wallet && (!wallet.isConnected() || !wallet.supportChain)\r\n      if(!isValidate()){\r\n        setRenderablity(defaultValue)\r\n      }\r\n    },60000)\r\n    return () => {\r\n      clearTimeout(timeout)\r\n    };\r\n  }, [props.value,props.decimalScale,props.suffix]);\r\n\r\n  return renderablity;\r\n}\r\nexport default DeriNumberFormat\r\n// export default inject('wallet')(observer(DeriNumberFormat))","export default __webpack_public_path__ + \"static/media/staked.46571832.svg\";","export default __webpack_public_path__ + \"static/media/close.61c9d399.svg\";","import React, { useState, useEffect } from 'react'\r\nimport { useHistory } from 'react-router-dom';\r\nimport DeriNumberFormat from \"../../utils/DeriNumberFormat\"\r\nimport Button from '../../components/Button/Button'\r\nimport BSC from '../../assets/img/BNB.svg'\r\nimport ARBITRUM from '../../assets/img/arbitrum-logo.svg'\r\nimport POLYGON from '../../assets/img/polygon-logo.svg'\r\nimport ETH from '../../assets/img/ethereum.svg'\r\nimport stakedLogo from './img/staked.svg'\r\nimport errorimg from '../../assets/img/ErrorImg.png'\r\nimport classNames from 'classnames'\r\nimport close from './img/close.svg'\r\nimport './card.less'\r\nimport styled from 'styled-components';\r\nexport default function Card({ lang, pool, wallet }) {\r\n  const history = useHistory();\r\n  // const [textLink,setTextLink] = useState('')\r\n  const [poolInfo, setPoolinfo] = useState({})\r\n  const [isStaked, setIsStaked] = useState(false)\r\n  const [xvsNum, setXvsNum] = useState()\r\n  const [show, setShow] = useState(true)\r\n  const getPoolInfo = async () => {\r\n    setPoolinfo({})\r\n    let res = await pool.getPoolInfo(pool.address, pool.chainId)\r\n    setPoolinfo(res)\r\n  }\r\n  const getVenusEarned = async () => {\r\n    if (pool && (pool.version === 'v3' || pool.version === 'v3_lite')) {\r\n      let res = await pool.getVenusEarned(wallet, pool.address)\r\n      setXvsNum(res)\r\n    }\r\n  }\r\n  const getIsStaked = async () => {\r\n    let res = await pool.getIsStaked(wallet, pool)\r\n    if (res) {\r\n      setIsStaked(res.isStaked)\r\n    }\r\n\r\n  }\r\n  const onImgError = (event) => {\r\n    event.target.src = errorimg\r\n  }\r\n  const closeSymbol = (address) => {\r\n    sessionStorage.setItem(address, false)\r\n    setShow(false)\r\n  }\r\n  useEffect(() => {\r\n    getPoolInfo()\r\n    if (wallet.isConnected()) {\r\n      getIsStaked()\r\n      getVenusEarned()\r\n    }\r\n  }, [pool, wallet.detail.account])\r\n  useEffect(() => {\r\n    let sess = sessionStorage.getItem(pool.address)\r\n    if (sess !== null) {\r\n      if (sess) {\r\n        setShow(false)\r\n      }\r\n    }\r\n  }, [pool])\r\n  const networkLogo = (chainId) => {\r\n    let src;\r\n    if (chainId === \"56\" || chainId === \"97\") {\r\n      src = BSC\r\n    } else if (chainId === \"137\") {\r\n      src = POLYGON\r\n    } else if (chainId === \"1\") {\r\n      src = ETH\r\n    } else if (chainId === '42161' || chainId === '421611') {\r\n      src = ARBITRUM\r\n    }\r\n    return src\r\n  }\r\n  const staking = (url) => {\r\n    if (pool.version === 'v2_lite_open') {\r\n      return\r\n    }\r\n    history.push(url)\r\n  }\r\n  const url = `/pool/${pool.version || 'v1'}/${pool.chainId}/${pool.type}/${pool.address}`\r\n  return (\r\n    <div className={`${pool.address === '0x243681B8Cd79E3823fF574e07B2378B8Ab292c1E' ? 'showGuide' : ''} card-box`}>\r\n      <div className={pool.version === 'v2_lite_open' ? 'card-list open-list' : 'card-list'} onClick={() => { staking(url) }} >\r\n        <div className={`card-header ${pool.retired ? `${pool.version}` : \"\"} ${pool.new ? \"new\" : ''}`}>\r\n          <div className='pool-network-type'>\r\n            <div className='network-logo'>\r\n              <img alt='' src={networkLogo(pool.chainId)} />\r\n            </div>\r\n            <div className='pool-type-network-text'>\r\n              <div className='pool-type-text'>\r\n                {pool.address !== '0xD2D950e338478eF7FeB092F840920B3482FcaC40' && <>\r\n                  {lang[pool.type]} {lang[pool.zone]}\r\n                </>}\r\n                {pool.address === \"0x1eF92eDA3CFeefb8Dae0DB4507f860d3b73f29BA\" && <>\r\n                  DERI-based\r\n                </>}\r\n                {pool.address === '0xD2D950e338478eF7FeB092F840920B3482FcaC40' && <>\r\n                  {lang[pool.zone]}\r\n                </>}\r\n              </div>\r\n              <div className='pool-network-text'>\r\n                {pool.chain.toUpperCase() === 'BSC' ? \"BNB Chain\" : pool.chain.toUpperCase()}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className='base-token-logo'>\r\n            {pool.isLp && <>\r\n              <div className='lp-base-token-bg'>\r\n                <div className={`base-token-bg ${pool.bTokens[0].bTokenSymbol}`}></div>\r\n                <span className='lp-con'>+</span>\r\n                <div className={`base-token-bg ${pool.bTokens[1].bTokenSymbol}`}></div>\r\n              </div>\r\n            </>}\r\n            {!pool.isLp && pool.version !== 'v3' && pool.version !== \"v3_lite\" && <>\r\n              {pool.bTokens.map((item, index) => <div key={index} className='base-token-box-bg'>\r\n                <div className={`base-token-bg ${item.bTokenSymbol}`}>\r\n                  {pool.version === 'v2_lite_open' && <>\r\n                    <img alt='' onError={onImgError} src={`https://raw.githubusercontent.com/deri-finance/deri-open-zone/main/img/${item.bTokenSymbol}.png`} />\r\n                  </>}\r\n                </div>\r\n              </div>)}\r\n            </>}\r\n            {(pool.version === \"v3\" || pool.version === \"v3_lite\") && (!pool.singleBtoken) &&\r\n              <TokenExplode bTokens={pool.bTokens} />\r\n            }\r\n            {\r\n              (pool.version === \"v3\" || pool.version === \"v3_lite\") && (pool.singleBtoken) &&\r\n              <div className='base-token-box-bg'>\r\n                <div className={`base-token-bg ${pool.bTokens[0].bTokenSymbol}`}>\r\n                </div>\r\n              </div>\r\n            }\r\n          </div>\r\n        </div>\r\n        <div className='card-content'>\r\n\r\n          <div className='max-apy'>\r\n            {pool.version !== 'v2_lite_open' && <>\r\n              <div className='max-apy-title'>\r\n                {(pool.version === 'v2' || pool.version === \"v3_lite\" || pool.version === \"v3\") ? lang['max-apy'] : lang['apy']}\r\n              </div>\r\n              <div className='max-apy-num'>\r\n                <DeriNumberFormat value={poolInfo.apy} suffix='%' displayType='text' allowZero={true} decimalScale={2} />\r\n              </div>\r\n            </>}\r\n          </div>\r\n          <div className='total-pool-liquidity'>\r\n            <div className='total-liquidity-title'>\r\n              {lang['total-pool-liquidity']}\r\n            </div>\r\n            <div className='total-liquidity-num'>\r\n              <DeriNumberFormat value={poolInfo.liquidity} displayType='text' thousandSeparator={true} decimalScale={pool.type === 'lp' ? 7 : 0} />\r\n            </div>\r\n          </div>\r\n          <div className='your-deri-epoch'>\r\n            {isStaked && <div className='staked-box'>\r\n              <img src={stakedLogo} alt='' />\r\n              {lang['staked']}\r\n            </div>}\r\n            {(+xvsNum > 0) && (pool.version === 'v3' || pool.version === 'v3_lite') && <span className='xvs-collectable'><div className='staked-box'><DeriNumberFormat width='50px' value={xvsNum} displayType='text' thousandSeparator={true} decimalScale={2} /> &nbsp; XVS  {lang['collectable']}</div></span>}\r\n          </div>\r\n          <div className='stake-button'>\r\n            <Button disabled={pool.version === 'v2_lite_open' ? true : false} className='button' outline label={pool.version === 'v2_lite_open' ? lang['operating'] : lang['stake']} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* {pool.version === \"v3_lite\" && show &&\r\n        <div className='new-symbol'>\r\n          <div className='new-symbol-text'>\r\n            New Listing : <a rel=\"noreferrer\" href='https://deri.io/#/trade/futures/FITFIUSDT' target=\"_blank\" >FITFIUSDT</a> <a href='https://deri.io/#/trade/futures/AVAXUSDT' rel=\"noreferrer\" target=\"_blank\">AVAXUSDT</a>\r\n          </div>\r\n          <div className='close-symbol'>\r\n            <img src={close} alt='close' onClick={() => closeSymbol(pool.address)} />\r\n          </div>\r\n        </div>\r\n      } */}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst TokenWrapper = styled.div`\r\n  @-webkit-keyframes explode {\r\n    0% {\r\n        transform: translateX(0px);\r\n        -moz-transform : translateX(0px);\r\n    }\r\n    100% {\r\n        transform: translateX(100px);\r\n        -moz-transform : translateX(100px);\r\n    }\r\n  }\r\n\r\n  @keyframes explode {\r\n    0% {\r\n        transform: translateX(0px);\r\n        -moz-transform : translateX(0px);\r\n    }\r\n    100% {\r\n        transform: translateX(100px);\r\n        -moz-transform : translateX(100px);\r\n    }\r\n  }\r\n  .base-token{\r\n    margin-left: 0px!important;\r\n    z-index : -2;\r\n    visibility: hidden;\r\n    background-color: #111e34;\r\n    border : 1px solid #fff;\r\n  }\r\n  @media only screen and (max-width: 760px) {\r\n    .base-token{\r\n      display:none;\r\n    }\r\n  }\r\n  .base-token-box-bg.explode:hover .move  {\r\n    -webkit-animation : explode .4s .0s linear;\r\n    -moz-animation :  explode .4s .0s linear;\r\n    animation: explode .4s .0s linear;\r\n    // transform : translateX(100px)!important;\r\n    visibility: visible;    \r\n  }\r\n  \r\n  .base-token-box-bg.explode:hover .base-token {\r\n    z-index : 2!important;\r\n  } \r\n\r\n`\r\nconst Token = styled.div`\r\n  position: absolute;\r\n  transform : ${props => `rotate(${-props.rotate}deg)`};\r\n  width: 48px;\r\n  height: 48px;\r\n  display: inline-block;\r\n  border-radius: 50%;\r\n  .move {\r\n    transform : translateX(100px) ${props => `rotate(${props.rotate}deg) !important`};\r\n  }\r\n`\r\n\r\nconst TokenExplode = ({ bTokens = [] }) => {\r\n  const angle = 360 / bTokens.length\r\n  return (\r\n    <TokenWrapper className='v3-tokens'>\r\n      <div className='tokens'>\r\n        {bTokens.filter((t, i) => i < 3).map((token, index) => (\r\n          <div className='base-token-box-bg' key={index}>\r\n            <div className={`base-token-bg ${token.bTokenSymbol}`}>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <div className='base-token-box-bg explode'>\r\n        <div className={'base-token-bg'}>\r\n          {bTokens.length - 3} +\r\n        </div>\r\n        {bTokens.map((token, index) => {\r\n          const curRotate = angle * index\r\n          return (\r\n            <Token className='base-token' rotate={curRotate} width='100' key={index}>\r\n              <div width='100' rotate={curRotate} className={`base-token-bg move ${token.bTokenSymbol}`} >\r\n              </div>\r\n            </Token>\r\n          )\r\n        })}\r\n      </div>\r\n    </TokenWrapper>\r\n  )\r\n}","import { useState, useEffect } from \"react\"\r\nimport { inject, observer } from 'mobx-react';\r\nimport Card from \"../../pages/Pool/Card\"\r\nimport apiProxy from '../../model/ApiProxy'\r\nimport selectIcon from '../../assets/img/arrow-down.svg'\r\nimport '../../pages/Pool/pool.less'\r\nimport './retired.less'\r\nfunction Retired({ lang, wallet = {}, poolManager }) {\r\n  const [curTabPool, setCurTabPool] = useState('amm');\r\n  const [curOpen, setCurOpen] = useState(false);\r\n  const [poolTitle, setPoolTitle] = useState(lang['deri-pool-title'])\r\n  const [nowPool, setNowPool] = useState([]);\r\n  const [checkedStaked, setCheckedStaked] = useState(false)\r\n  const [stakedAmmList, setStakedAmmList] = useState([])\r\n  const [stakedLpList, setStakedLpList] = useState([])\r\n\r\n\r\n  const getStakedPools = async () => {\r\n    let filterPools = [...poolManager.ammPools, ...poolManager.lpPools];\r\n    let arr = await Promise.all(filterPools.map(async (item) => {\r\n      let params = [item.chainId, item.address, wallet.detail.account]\r\n      let res = await apiProxy.request('getUserStakeInfo', params)\r\n      if (res.isStaked) {\r\n        return item\r\n      } else {\r\n        return false\r\n      }\r\n    }))\r\n    arr = arr.filter(p => p)\r\n    let ammArr = arr.filter(p => p.type !== 'lp')\r\n    let lpArr = arr.filter(p => p.type === 'lp')\r\n    setStakedAmmList(ammArr)\r\n    setStakedLpList(lpArr)\r\n  }\r\n\r\n\r\n  useEffect(() => {\r\n    if (wallet.isConnected()) {\r\n      getStakedPools()\r\n    }\r\n  }, [wallet.detail, poolManager, curTabPool])\r\n\r\n  useEffect(() => {\r\n    if (curOpen) {\r\n      setPoolTitle(lang['open-pool-title'])\r\n    } else {\r\n      setPoolTitle(lang['deri-pool-title'])\r\n    }\r\n  }, [curOpen])\r\n  useEffect(() => {\r\n    poolManager.load()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    setNowPool(poolManager.retiredPools)\r\n  }, [poolManager.pools])\r\n  return (\r\n    <div className='pool-box'>\r\n      <div className='pool-info'>\r\n        <div className='left'>\r\n          <div className='left-header-info'>\r\n            <div className='pool-title'>\r\n              <div className='pool-title-text'>\r\n                {poolTitle}\r\n              </div>\r\n              <div className='pool-title-select-text'>\r\n                {!curOpen && <>\r\n                  <div className='pool-test-des'>\r\n                    {lang['pool-title-des-one']}\r\n                  </div>\r\n                  <div className='pool-test-des'>\r\n                    {lang['pool-title-des-two']}\r\n                  </div>\r\n                </>}\r\n                {curOpen && <>\r\n                  <div className='pool-test-des'>\r\n                    {lang['open-pool-title-des-one']}\r\n                  </div>\r\n                  <div className='pool-test-des'>\r\n                    {lang['open-pool-title-des-two']}\r\n                  </div>\r\n                </>}\r\n              </div>\r\n\r\n            </div>\r\n          </div>\r\n          <div className='pool-card-claim-bg'>\r\n            <div className='retired-hint'>\r\n              <div>Several V3 ( <a rel=\"noreferrer\" target=\"_blank\" href=\"https://deri.io/#/retired/trade/futures\">Fut Main</a> ) and V2 markets ( <a rel=\"noreferrer\" target=\"_blank\" href=\"https://deri.io/#/retired/trade/options\">Options</a> , <a rel=\"noreferrer\" target=\"_blank\" href=\"https://deri.io/#/retired/trade/futures\">Fut Main &amp; Fut Inno-BUSD </a> pools) are no longer supported, please close position and remove your collaterals.</div>\r\n            </div>\r\n\r\n            <div className='pool-card'>\r\n              {nowPool.map((item, index) => <Card wallet={wallet} lang={lang} pool={item} key={index} />)}\r\n            </div>\r\n            <div className></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default inject('wallet', 'poolManager')(observer(Retired))"],"sourceRoot":""}