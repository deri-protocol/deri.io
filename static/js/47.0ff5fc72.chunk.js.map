{"version":3,"sources":["../../src/index.ts"],"names":["AbstractConnector","supportedChainIds","emitUpdate","ConnectorEvent","emitError","emitDeactivate","WalletLinkConnector","url","appName","appLogoUrl","darkMode","this","method","accounts","account","provider","window","walletLink","m","WalletLink","e","deactivate","removeListener","handleChainChanged","chainId","handleAccountsChanged"],"mappings":"gLAGsBA,EAAtB,Y,4BAGgBC,Q,MAAkD,MAAlDA,kB,6BAEZ,oB,oHALJ,WAcYC,Y,KAIR,KAAUC,IAAV,SAlBJ,E,EAAA,UAqBYC,Y,KAIR,KAAUD,IAAV,QAzBJ,E,EAAA,eA4BYE,W,KAIR,KAAUF,IAAV,WAhCJ,E,EAAA,gB,qhBAAA,IAUaG,EAAb,Y,QASE,c,MAAcC,QAAKC,YAASC,eAAYC,aAAUT,sB,OAChD,cAAM,CAAEA,kBAAmBA,KAA3B,MAEA,MACA,YACA,eACA,WAAgBS,IAAhB,EAEA,qBAA0B,4BAA1B,IACA,wBAA6B,+BAA7B,I,CACD,C,EAnBH,G,EAAA,G,sEAAA,mD,MAyBMC,K,oCAWqB,mBAAsB,CAC3CC,OAAQ,yBADa,eAAjBC,GAGN,IAAMC,EAAUD,EAAhB,GAKA,OAHA,6BAAiC,EAAjC,oBACA,gCAAoC,EAApC,uBAEO,CAAEE,SAAU,EAAZ,SAA2BD,QAASA,E,qBArBvCE,kBAAwD,IAArCA,iCAErB,WAAgBA,OAAhB,a,sBACU,EAAKC,W,uBACU,wEAA0B,SAAAC,GAAC,4BAAIA,OAAJ,EAAIA,EAAC,SAAL,GAA3B,oBAAnBC,GACN,aAAkB,IAAIA,EAAW,EAAf,CAChBX,QAAS,EADO,QAEhBE,SAAU,EAAKA,UACX,aAAkB,CAAED,WAAY,EAAKA,YAH3C,KAKA,WAAgB,8BAAiC,EAAjC,IA3CtB,E,qGAUA,OAAAW,GAAA,sBAAAA,EAAA,gCAgDI,OAAO,QAAP,QAAOT,KAAP,SAhDJ,OAAAS,GAAA,sBAAAA,EAAA,+BAoDI,OAAO,QAAP,QAAOT,KAAA,SAAP,QApDJ,OAAAS,GAAA,sBAAAA,EAAA,+B,uBAwD2BT,KAAA,iBAAsB,CAC3CC,OAAQ,yBADa,eAAjBC,GAGN,OAAOA,EAAP,E,GA3DJ,OAAAO,GAAA,sBAAAA,EAAA,gBA8DSC,WACLV,KAAKI,SAASO,eAAe,eAAgBX,KAA7C,oBACAA,KAAKI,SAASO,eAAe,kBAAmBX,KAAhD,sBAhEJ,yB,OAoEIA,KAAA,iBAAAA,KACA,iB,iBArEJ,OAAAS,GAAA,sBAAAA,EAAA,wBAwEUG,YAINZ,KAAKT,WAAW,CAAEsB,QAASA,GA5E/B,0BA+EUC,YAINd,KAAKT,WAAW,CAAEY,QAASD,EAAS,IAnFxC,S","file":"static/js/47.0ff5fc72.chunk.js","sourcesContent":["import { ConnectorUpdate } from '@web3-react/types'\nimport { AbstractConnector } from '@web3-react/abstract-connector'\n\nconst CHAIN_ID = 1\n\ninterface WalletLinkConnectorArguments {\n  url: string\n  appName: string\n  appLogoUrl?: string\n  darkMode?: boolean\n  supportedChainIds?: number[]\n}\n\nexport class WalletLinkConnector extends AbstractConnector {\n  private readonly url: string\n  private readonly appName: string\n  private readonly appLogoUrl?: string\n  private readonly darkMode: boolean\n\n  public walletLink: any\n  private provider: any\n\n  constructor({ url, appName, appLogoUrl, darkMode, supportedChainIds }: WalletLinkConnectorArguments) {\n    super({ supportedChainIds: supportedChainIds })\n\n    this.url = url\n    this.appName = appName\n    this.appLogoUrl = appLogoUrl\n    this.darkMode = darkMode || false\n\n    this.handleChainChanged = this.handleChainChanged.bind(this)\n    this.handleAccountsChanged = this.handleAccountsChanged.bind(this)\n  }\n\n  public async activate(): Promise<ConnectorUpdate> {\n    // @ts-ignore\n    if (window.ethereum && window.ethereum.isCoinbaseWallet === true) {\n      // user is in the dapp browser on Coinbase Wallet\n      this.provider = window.ethereum\n    } else if (!this.walletLink) {\n      const WalletLink = await import('walletlink').then(m => m?.default ?? m)\n      this.walletLink = new WalletLink({\n        appName: this.appName,\n        darkMode: this.darkMode,\n        ...(this.appLogoUrl ? { appLogoUrl: this.appLogoUrl } : {})\n      })\n      this.provider = this.walletLink.makeWeb3Provider(this.url, CHAIN_ID)\n    }\n\n    const accounts = await this.provider.request({\n      method: 'eth_requestAccounts'\n    })\n    const account = accounts[0]\n\n    this.provider.on('chainChanged', this.handleChainChanged)\n    this.provider.on('accountsChanged', this.handleAccountsChanged)\n\n    return { provider: this.provider, account: account }\n  }\n\n  public async getProvider(): Promise<any> {\n    return this.provider\n  }\n\n  public async getChainId(): Promise<number> {\n    return this.provider.chainId\n  }\n\n  public async getAccount(): Promise<null | string> {\n    const accounts = await this.provider.request({\n      method: 'eth_requestAccounts'\n    })\n    return accounts[0]\n  }\n\n  public deactivate() {\n    this.provider.removeListener('chainChanged', this.handleChainChanged)\n    this.provider.removeListener('accountsChanged', this.handleAccountsChanged)\n  }\n\n  public async close() {\n    this.provider.close()\n    this.emitDeactivate()\n  }\n\n  private handleChainChanged(chainId: number | string): void {\n    if (__DEV__) {\n      console.log(\"Handling 'chainChanged' event with payload\", chainId)\n    }\n    this.emitUpdate({ chainId: chainId })\n  }\n\n  private handleAccountsChanged(accounts: string[]): void {\n    if (__DEV__) {\n      console.log(\"Handling 'accountsChanged' event with payload\", accounts)\n    }\n    this.emitUpdate({ account: accounts[0] })\n  }\n}\n"],"sourceRoot":""}