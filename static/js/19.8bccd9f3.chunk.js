(this["webpackJsonpderi-client"]=this["webpackJsonpderi-client"]||[]).push([[19],{1218:function(e,t,a){"use strict";var i,n,s=a(22),c=a(1214),l=a(67),o=a(14),r=a(138),d=a(6),b=(a(63),a(1280)),u=a(49),j=a(19),p=a(9),h=a(4),x=["allowZero","wallet","closeShowLoadingEffectAfterLoaded","defaultValue"],m=Object(u.a)(b.a)(i||(i=Object(r.a)(["\n  width : ","px;\n"])),(function(e){return e.width})),v=u.a.div(n||(n=Object(r.a)(["\n  width : ",";\n  height : ",";\n"])),(function(e){return/px$/.test(e.width)?e.width:"".concat(e.width,"px")}),(function(e){return/px$/.test(e.height)?e.height:"".concat(e.height,"px")}));t.a=function(e){var t=Object(d.useState)(Object(h.jsx)("span",{className:"loading-line"})),a=Object(o.a)(t,2),i=a[0],n=a[1],r=Object(d.useState)(!0),b=Object(o.a)(r,2),u=b[0],f=b[1],O=function(){var t=e.allowZero;return"object"!==Object(l.a)(e.value)&&void 0!==e.value&&""!==e.value&&!isNaN(e.value)&&"NaN"!==e.value||0===Math.abs(e.value)&&!0===t},g=function(e){return e&&e.replace(/\.$/,"")};return Object(d.useEffect)((function(){var t=e.allowZero,a=(e.wallet,e.closeShowLoadingEffectAfterLoaded),i=e.defaultValue,l=void 0===i?"--":i,o=Object(c.a)(e,x);if(O())o.decimalScale>0&&o.value&&/\d+\.0*[1-9]+/.test(o.value)&&0===+Object(p.bg)(o.value).toFixed(+o.decimalScale||2)&&(o.decimalScale=Object(j.d)(Math.abs(o.value))+2),(-1===o.decimalScale||0===+o.value&&t)&&delete o.decimalScale,o.value=Object(j.K)(o.value),o.value&&/\d+.9{6}/.test(o.value)&&(o.value=(+o.value).toFixed(5)),n(Object(h.jsx)(m,Object(s.a)(Object(s.a)({},o),{},{renderText:g,displayType:"text",fixedDecimalScale:!0,thousandSeparator:!0})));else if(u){var r=e.width,d=e.height;n(Object(h.jsx)(v,{className:"loading-line",width:r,height:d})),a&&f(!1)}var b=window.setTimeout((function(){O()||n(l)}),6e4);return function(){clearTimeout(b)}}),[e.value,e.decimalScale,e.suffix]),i}},1229:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var i=a(49),n=a(1324),s=a.n(n),c=a(140),l=a(19),o=a(1300),r=a(4);const d=i.a.div`
  display:${e=>e.block};
  .text {
    border-bottom : 1px dashed #93A1B8;
    width : max-content;
    cursor : pointer;
    display:${e=>e.block}
  }
  
  .__react_component_tooltip.tooltip.show {
    font-weight : ${e=>e.isWin?400:600} 
  }
`;function b(e){let{text:t,id:a=String((new Date).getTime())+Math.random(),tip:i,multiline:n,html:b,className:u,element:j="",block:p="block",width:h="auto",children:x,tiggerEvent:m}=e;return Object(r.jsxs)(d,{className:u,block:p,isWin:o.isWindows,children:[Object(r.jsx)("div",{className:"text","data-for":a,"data-tip":b?s.a.renderToString(j):i,"data-event":Object(l.z)()?"click":m,"data-html":b,children:t||x}),i&&Object(r.jsx)(c.a,{id:a,width:h,padding:"12",place:"bottom",overridePosition:(e,t,a,i,n,s,c,l)=>{const o=a.getBoundingClientRect(),r=i.getBoundingClientRect();let{x:d,y:b,height:u,width:j}=o;const{left:p,top:h}=e;return d+r.width/2>document.documentElement.clientWidth?d-=Math.abs(j-r.width):d-(r.width-j)/2<0?d-=j:d-=(r.width-j)/2,b+u+r.height>=document.documentElement.clientHeight?b=b+u-r.height:b+=u,d<0&&(d=0),b<0&&(b=0),{top:b,left:d}},html:b,borderRadius:8,multiline:n})]})}},1276:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var i=a(6),n=a(162),s=a(49),c=a(4);const l=s.a.div`
    display : flex;
    width: 100%;
    justify-content: space-between;
  `;function o(e){let{groups:t=["25%","50%","75%","100%"],selectedBorderColor:a,defaultBorderColor:s,onChange:o,defaultValue:r,outline:d,outlineColor:b,width:u,height:j,bgColor:p,className:h,disabled:x,canUnselected:m=!0}=e;const[v,f]=Object(i.useState)(r);return Object(i.useEffect)((()=>{f(r)}),[r]),Object(c.jsx)(l,{className:h,children:t.map(((e,t)=>Object(c.jsx)(n.a,{label:e,selectedBorderColor:a,isSelected:e===v,disabled:x,outline:d,bgColor:p,className:"g-button",defaultBorderColor:s,outlineColor:b,width:u,height:j,onClick:()=>{var t;(t=e)!==v?(f(t),o&&o(t)):m&&t===v?(f(""),o&&o("")):f(t)}},t)))})}},1325:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var i,n=a(22),s=a(138),c=a(6),l=a(49),o=a(9),r=a(1229),d=a(4),b=l.a.div(i||(i=Object(s.a)(["\ndisplay : flex;\nfont-size : 14px;\nalign-items : center;\nbackground: rgba(85, 119, 253, 0.1);\nborder-radius: 4px;\njustify-content: space-between;\ninput {\n  background: transparent;\n  border-radius: 4px;\n  // min-width: 240px;\n  border: 0;\n  width : ",";\n  height: ",";\n  color : #E0ECFF;\n  font-size : 18px;\n  padding-left: 16px;\n}\ninput:focus {\n  outline: none;\n}\n.unit {\n  margin-right: ",";\n}\n"])),(function(e){return e.inputWidth}),(function(e){return e.inputHeight}),(function(e){return e.unitPadding}));function u(e){var t=e.value,a=e.unit,i=e.unitTip,s=e.max,l=e.step,u=e.onChange,j=e.styles,p=void 0===j?{}:j,h=e.disableNegtive,x=void 0===h||h,m=e.focus,v=e.placeholder,f=void 0===v?"":v,O=e.unitPadding,g=void 0===O?"24px":O,k=e.minTradeVolume,y=e.decimal,w=void 0===y?2:y,N=e.readOnly,S=e.inputWidth,T=void 0===S?"50%":S,C=e.inputHeight,I=void 0===C?"56px":C,q=e.className,E=e.disabled,F=void 0!==E&&E,_=e.onBlur,$=e.onFocus,B=Object(c.useRef)(null);return Object(c.useEffect)((function(){B.current.setCustomValidity(""),B.current&&m&&B.current.focus()}),[m]),Object(d.jsxs)(b,{unitPadding:g,inputWidth:T,inputHeight:I,className:q,style:Object(n.a)({},p),children:[Object(d.jsx)("input",{placeholder:f,type:"number",onBlur:_,onFocus:$,disabled:F,value:t,step:l,ref:B,onChange:function(e){var t="\\d+\\.\\d{0,".concat(w,"}$"),a=new RegExp(t),i=e.target.value;if(s&&Object(o.bg)(i).gt(s))u&&u(s);else if(x&&(i<0||isNaN(i)))u&&u("");else if(i){if(k>=1)if(i/k>=1)u&&u(Object(o.bg)(i).div(k).integerValue()*k);else u&&u(i*k);else if(/\d+\./.test(i)&&!a.test(i)){var n=i.substring(0,i.indexOf(".")+1+w);u&&u(n)}else u&&u(i)}else u&&u(i)},readOnly:N}),Object(d.jsx)("div",{className:"unit",children:i?Object(d.jsx)(r.a,{tip:i,text:a}):a})]})}},1368:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var i=a(49),n=a(6),s=a(29),c=a(4);const l=i.a.div`
    cursor: pointer;
    width:${e=>e.width}px;
    height:${e=>e.height}px;
    display:flex;
    .tab-left.inactive{
      border-radius:0px 0px 4px 0px;
    }
    .tab-right.inactive{
      border-radius:0px 0px 0px 4px;
    }
    .tab-left.active{
      border-radius:0px 4px 0px 0px;
      ${e=>e.borderR};
    }
    .tab-right.active{
      border-radius:4px 0px 0px 0px;
      ${e=>e.borderL};
    }
    .inactive,.active{
      width:50%;
      box-sizing: content-box;
      font-size:${e=>e.size}px;
      display: flex;
      align-items: center;
      justify-content: center;
      img{
        margin-right:${e=>e.iconMarginRight}px
      }
    }
    .inactive{
      background:${e=>e.inactiveBgColor};
      ${e=>e.borderB}
    }
    .active {
      color: ${e=>e.activeFontColor};
      background : ${e=>e.activeBgColor};
      ${e=>e.borderT};
    }
    .icon-tab{
      margin-right:20px;
      width:25px;
      height:25px;
    }
  `;function o(e){let{tabSet:t,inactiveBgColor:a,iconMarginRight:i,activeBgColor:o,icon:r,className:d,width:b=238,height:u=47,size:j=16,borderTop:p=!1,borderBottom:h=!1,divider:x=!1,activeIndex:m=0}=e,v=Object.keys(t);const[f,O]=Object(n.useState)(v[m]),[g,k]=Object(n.useState)(),[y,w]=Object(n.useState)(),[N,S]=Object(n.useState)(),[T,C]=Object(n.useState)(),[I,q]=Object(n.useState)(),[E,F]=Object(n.useState)();return Object(n.useEffect)((()=>{const e=Object.keys(t);O(e[m])}),[t,m]),Object(n.useEffect)((()=>{const e=Object.keys(t);let a=f||e[m];if(t[a]){k(t[a].style);let e=p?`border-top:1px solid ${t[a].borderColor}`:"border-top:0",i=h?`border-bottom:1px solid ${t[a].borderColor}`:"border-bottom:0",n=x?`border-left:1px solid ${t[a].borderColor}`:"border-left:0",s=x?`border-right:1px solid ${t[a].borderColor}`:"border-right:0",c=t[a].fontColor?t[a].fontColor:"#FFFFFF";w(e),S(n),C(i),q(s),F(c)}}),[t,f]),Object(c.jsxs)("div",{style:g,className:d,children:[Object(c.jsx)(l,{className:"tab-header",iconMarginRight:i,width:b,height:u,activeFontColor:E,activeBgColor:o,inactiveBgColor:a,size:j,borderT:y,borderB:T,borderL:N,borderR:I,children:v.map(((e,a)=>Object(c.jsxs)("div",{className:e===f?`${t[e].direction||t[e].className} active`:`${t[e].direction||t[e].className} inactive`,onClick:t=>function(e,t){O(e)}(e),children:[t[e].icon?Object(c.jsx)(s.a,{width:t[e].iconWidth,height:t[e].iconHeight,token:e===f?t[e].icon:t[e].inicon}):"","  ",e]},a)))}),t[f]?t[f].content:""]})}},1391:function(e,t,a){"use strict";t.a=a.p+"static/media/staked.45c27f0b.svg"},1405:function(e,t,a){"use strict";var i=a(6),n=a(162),s=a(46),c=a(120),l=a(39),o=a(9),r=a(19),d=(a(1637),a(4));function b(){return Object(d.jsx)("div",{class:"sleepContentView",children:Object(d.jsx)("div",{class:"circle"})})}var u=a(29);a(1638);t.a=Object(s.b)("wallet")(Object(s.c)((function(e){let{lang:t,subject:a,wallet:s,pool:j={},ignoreApprove:p,bTokenId:h,bToken:x,icon:m,label:v,onClick:f,isReady:O,disabled:g=!0,statusCallback:k,alert:y,...w}=e;const[N,S]=Object(i.useState)(!0),[T,C]=Object(i.useState)(v),[I,q]=Object(i.useState)(!1),[E,F]=Object(i.useState)(!1),[_,$]=Object(i.useState)(!1),[B,L]=Object(i.useState)(!1),[H,A]=Object(i.useState)(m),U=Object(i.useCallback)((async(e,t)=>{let a;if(e.detail&&t.address)if(c.a.isOpen&&await o.openConfigListCache.update(),Object(r.y)(t.address))a=await l.a.request("isLpUnlocked",[e.detail.chainId,t.address,e.detail.account]);else if(h||x){const i=[e.detail.chainId,t.address,e.detail.account,h||x];a=await l.a.request("isUnlocked",i)}return a}),[x,h]),D=Object(i.useCallback)((async()=>{if(s&&j){let e;if(c.a.isOpen&&await o.openConfigListCache.update(),Object(r.y)(j.address))e=await l.a.request("unlockLp",[s.detail.chainId,j.address,s.detail.account],{write:!0,subject:t.approve});else{let a=[s.detail.chainId,j.address,s.detail.account,h||x];e=await l.a.request("unlock",a,{write:!0,subject:Object(r.h)(t.approve.toLowerCase())})}if(e){if(e.status)y.success(`Approve ${x}`,{timeout:8e3,isTransaction:!0,transactionHash:e.transactionHash,link:`${s.blockExploreUrl}/tx/${e.transactionHash}`,title:"Approve Executed"});else{if(""===e.transactionHash)return!1;y.error(`Transaction Failed ${e.error}`,{timeout:3e5,isTransaction:!0,transactionHash:e.transactionHash,link:`${s.blockExploreUrl}/tx/${e.transactionHash}`,title:"Approve Failed"})}return e.status}}}),[j,s,h,x]);return Object(i.useEffect)((async()=>{j&&s.detail&&s.detail.account&&j.bTokens&&t&&(s.isConnected()?await U(s,j)?(q(!1),C(v),A(m),k&&k(!1)):(q(!0),A(m),k&&k(!0)):(C(t["connect-wallet"]),A(null)))}),[j,s,t,x,h]),Object(i.useEffect)((()=>{S(!g)}),[g]),Object(i.useEffect)((()=>{s&&j&&j.address&&(s.setAddress(j.address),j.isV3||j.isV3Lite?s.setBToken(x):s.setBTokenId(h))}),[s,j,h,x]),Object(d.jsxs)("div",{children:[Object(d.jsx)(n.a,{...w,disabled:!N,label:T,onClick:async e=>{if(j&&s&&s.detail){if(L(!0),s.isConnected()){if(p||await U(s,j))return A(m),f(e);{A(m);let e=await D();if(e){F(!0),await f()&&$(!0),k&&k(!1)}else L(!1),k&&k(!0);return e}}return A(null),s.connect()}},icon:H}),!p&&I&&N&&Object(d.jsxs)("div",{className:"init-approve",children:[Object(d.jsxs)("div",{className:"step-approve",children:[!B&&Object(d.jsx)("div",{className:"step-one",children:"1"}),B&&Object(d.jsx)("div",{className:"pending",children:E?Object(d.jsx)(u.a,{token:"finish"}):Object(d.jsx)(b,{})}),Object(d.jsx)("div",{className:E?"approve-text finish-text":"approve-text",children:t.approve})]}),Object(d.jsx)("div",{className:E?"step-hr finish":"step-hr"}),Object(d.jsxs)("div",{className:"step-transaction",children:[!E&&Object(d.jsx)("div",{className:"step-two",children:"2"}),B&&E&&Object(d.jsx)("div",{className:"pending",children:_?Object(d.jsx)(u.a,{token:"finish"}):Object(d.jsx)(b,{})}),Object(d.jsx)("div",{className:_?"transaction-text finish-text":"transaction-text",children:T})]})]})]})})))},1418:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var i=a(49),n=(a(6),a(4));const s=i.a.div`
width:${e=>e.width}%;
max-width:100%;
height:10px;
background-color: #5577FD;
`;function c(e){let{startTimestamp:t,nowTimestamp:a,endTimestamp:i}=e;const c=parseInt((a-t)/(i-t)*100);return Object(n.jsx)("div",{className:"time-slider",children:Object(n.jsx)(s,{width:c})})}},1420:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var i=a(6),n=a(49),s=a(461),c=a(4);const l=n.a.div`
  .search-token{
  width: ${e=>e.width}px;
  height: ${e=>e.height}px;
  background: ${e=>e.bgColor};
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding:0 24px;
  border-radius:4px;
  img{
    width:18px;
    height:18px;
  }
  .search-input{
    border: 0;
    width:100%;
    height: 100%;
    background:transparent;
    outline-style: none;
    color: #FFFFFF;
    font-size: 18px;
    border-radius: 4px;
  }
}
`;function o(e){let{list:t,onChange:a,width:n="320",height:o="48",bgColor:r="rgba(85, 119, 253, 0.1)",searchName:d="bTokenSymbol",className:b,placeholder:u="Search",onFocus:j,onBlur:p}=e;const[h,x]=Object(i.useState)(""),[m,v]=Object(i.useState)(0),f=Object(i.useRef)([]);return Object(i.useEffect)((()=>{if(h){let e=h.toLocaleUpperCase();0===f.current.length&&(f.current=t,v(t.length));const i=f.current.filter((t=>t[d]&&t[d].toUpperCase().indexOf(e)>=0));a(i,e)}else a(f.current)}),[h]),Object(i.useEffect)((()=>{0===f.current.length&&v(t.length)}),[t]),Object(c.jsx)(l,{width:n,height:o,bgColor:r,className:b,children:Object(c.jsxs)("div",{className:"search-token",children:[Object(c.jsx)("input",{type:"text",className:"search-input",placeholder:u,value:h,onChange:e=>{(e=>{let t=e.target.value;x(t)})(e)}}),Object(c.jsx)("img",{src:s.default,alt:""})]})})}},1625:function(e,t,a){},1634:function(e,t,a){"use strict";a(53),a(19),a(1550),a(1533),a(1636),a(126),a(4)},1636:function(e,t,a){},1637:function(e,t,a){},1638:function(e,t,a){},1639:function(e,t,a){"use strict";a.d(t,"a",(function(){return j}));var i,n=a(14),s=a(138),c=a(6),l=(a(39),a(49)),o=a(29),r=a(1229),d=a(1218),b=a(4),u=l.a.div(i||(i=Object(s.a)(["\n  .remove-hint{\n    cursor: pointer;\n    .text{\n      display: flex;\n      border:0;\n    }\n    span{\n      margin-left:8px;\n    }\n  }\n"])));function j(e){var t=e.lang,a=e.wallet,i=e.baseToken,s=e.penalty,l=e.isB0Staked,j=e.availableBalance,p=e.getLang,h=Object(c.useState)(""),x=Object(n.a)(h,2),m=x[0],v=x[1],f=Object(c.useState)("BUSD"),O=Object(n.a)(f,2),g=O[0],k=O[1];return Object(c.useEffect)((function(){var e,n=56===+a.detail.chainId||97===+a.detail.chainId?"BUSD":"USDC";k(n);var c={num:i,name:n},o={name:n};e=l?"BUSD"===i||"USDC"===i?"".concat(t["your-account-has-an-unsettled-balance-of"]," ").concat(s," ").concat(n," ").concat(p("this-action-will-update-your",o)):"".concat(t["your-account-has-an-unsettled-balance-of"]," ").concat(s," ").concat(n," ").concat(p("this-action-will-trigger-swapping-to-update-your",c)):"".concat(t["your-account-has-an-unsettled-balance-of"]," ").concat(s," ").concat(n," ").concat(p("this-action-will-trigger-swapping-to-update-your-busd-balance-to-reflect-the-unsettled-amount",c)),v(e)}),[l,s,i]),Object(b.jsx)(u,{children:+s<0&&+j>0&&Object(b.jsx)("div",{className:"remove-hint",children:Object(b.jsxs)(r.a,{tip:m,width:"332",children:[Object(b.jsx)(o.a,{token:"warn"})," ",Object(b.jsxs)("span",{children:[t["negative-unsettled-balance"]," : ",Object(b.jsx)(d.a,{value:s,decimalScale:2})," ",g]})]})})})}},2060:function(e,t,a){},2061:function(e,t,a){},2326:function(e,t,a){"use strict";a.r(t);var i=a(6),n=a(53),s=a(46),c=a(163),l=a(2),o=a(14),r=a(1),d=a.n(r),b=a(1325),u=a(1405),j=a(1276),p=a(19),h=a(1218),x=a(10),m=a(39),v=(a(2060),a(9)),f=a(1639),O=a(4);function g(e){var t=e.getLang,a=e.wallet,n=e.lang,s=e.type,r=e.isLp,g=e.bTokenId,k=e.poolConfig,y=e.version,w=e.baseToken,N=e.address,S=e.walletBalance,T=e.poolInfo,C=e.afterTransaction,I=Object(i.useState)(""),q=Object(o.a)(I,2),E=q[0],F=q[1],_=Object(i.useState)(!1),$=Object(o.a)(_,2),B=$[0],L=$[1],H=Object(i.useState)(""),A=Object(o.a)(H,2),U=A[0],D=A[1],R=Object(i.useState)(!1),P=Object(o.a)(R,2),z=P[0],Z=P[1],V=Object(i.useState)(""),W=Object(o.a)(V,2),M=W[0],K=W[1],X=Object(i.useState)(!1),J=Object(o.a)(X,2),G=J[0],Q=J[1],Y=Object(c.c)(),ee=Object(i.useState)({}),te=Object(o.a)(ee,2),ae=te[0],ie=te[1],ne="add"===s||"v2"===y||"v3"===y||"v3_lite"===y?w:n.shares,se=function(){var e=Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w){e.next=6;break}return e.next=3,m.a.request("getEstimatedLpInfo",[a.detail.chainId,N,a.detail.account,w]);case 3:t=e.sent,K(t.b0Penalty),Q(t.isB0Staked);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Object(l.a)(d.a.mark((function e(){var t,i,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="add"===s?E:Object(v.bg)(E).times(Object(v.bg)(-1)).toString(),i="v3"===y||"v3_lite"===y?[a.detail.chainId,N,a.detail.account,t,w]:[a.detail.chainId,N,a.detail.account,t,g],e.next=4,m.a.request("getEstimatedLiquidityInfo",i);case 4:+(n=e.sent).percentage1<0&&(n.percentage1=0,n.shares1=0),ie(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),le=function(){var e=Object(l.a)(d.a.mark((function e(){var i,s,c,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Object(v.bg)(S),!Object(v.bg)(E).gt(i)){e.next=5;break}return Y.error(n["not-sufficient-funds"]),e.abrupt("return",!1);case 5:if(!(E<=0||isNaN(E))){e.next=8;break}return Y.error(n["it-has-to-be-greater-than-zero"]),e.abrupt("return",!1);case 8:if("lp"!==r){e.next=15;break}return c=[a.detail.chainId,N,a.detail.account,E],e.next=12,m.a.request("addLpLiquidity",c,{includeResponse:!0,write:!0,subject:n["add-liquidity"]});case 12:s=e.sent,e.next=19;break;case 15:return l="v3"===y||"v3_lite"===y?[a.detail.chainId,N,a.detail.account,E,w]:[a.detail.chainId,N,a.detail.account,E,g],e.next=18,m.a.request("addLiquidity",l,{includeResponse:!0,write:!0,subject:n["add-liquidity"]});case 18:s=e.sent;case 19:if(C(!0),F(""),s&&s.success){e.next=28;break}if(""!==s.response.transactionHash){e.next=24;break}return e.abrupt("return",!1);case 24:return Y.error("".concat(n["transaction-failed"]," : ").concat(s.response.error),{timeout:3e5,isTransaction:!0,transactionHash:s.response.transactionHash,link:"".concat(a.blockExploreUrl,"/tx/").concat(s.response.transactionHash),title:n["add-liquidity-failed"]}),e.abrupt("return",!1);case 28:Y.success("".concat(t("add-baseToken-liquidity",{baseToken:w})),{timeout:8e3,isTransaction:!0,transactionHash:s.response.data.transactionHash,link:"".concat(a.blockExploreUrl,"/tx/").concat(s.response.data.transactionHash),title:n["add-liquidity-executed"]});case 29:return e.abrupt("return",!0);case 30:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=Object(l.a)(d.a.mark((function e(){var i,s,c,l,o,b;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Object(v.bg)(T.totalShares),s=B?T.totalShares:E,!(c=Object(v.bg)(s)).gt(i)){e.next=6;break}return Y.error("".concat(n["your-current-max-removable-shares-are"],"  ").concat(T.totalShares)),e.abrupt("return",!1);case 6:if(!(+s<=0||isNaN(E))){e.next=9;break}return Y.error(n["invalid-liquidity"]),e.abrupt("return",!1);case 9:if("lp"!==r){e.next=16;break}return o=[a.detail.chainId,N,a.detail.account,s],e.next=13,m.a.request("removeLpLiquidity",o,{includeResponse:!0,write:!0,subject:n["remove-liquidity"]});case 13:l=e.sent,e.next=20;break;case 16:return b="v3"===y||"v3_lite"===y?[a.detail.chainId,N,a.detail.account,s,w,i.eq(c)]:[a.detail.chainId,N,a.detail.account,s,g,i.eq(c)],e.next=19,m.a.request("removeLiquidity",b,{includeResponse:!0,write:!0,subject:n["remove-liquidity"]});case 19:l=e.sent;case 20:if(l&&l.success){e.next=26;break}if(""!==l.response.transactionHash){e.next=23;break}return e.abrupt("return",!1);case 23:Y.error("".concat(n["transaction-failed"]," : ").concat(l.response.error),{timeout:3e5,isTransaction:!0,transactionHash:l.response.transactionHash,link:"".concat(a.blockExploreUrl,"/tx/").concat(l.response.transactionHash),title:n["remove-liquidity-failed"]}),e.next=27;break;case 26:Y.success("".concat(t("remove-baseToken-liquidity",{baseToken:w})),{timeout:5e3,isTransaction:!0,transactionHash:l.response.data.transactionHash,link:"".concat(a.blockExploreUrl,"/tx/").concat(l.response.data.transactionHash),title:n["remove-liquidity-executed"]});case 27:return F(""),C(),e.abrupt("return",!0);case 30:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e="add"===s?Object(v.bg)(S):Object(v.bg)(T.totalShares);/\d+\.(999999|099999|009999|000999|000099|000009)/.test(e)&&(e=Object(v.bg)((+S).toFixed(5)));var t=Object(v.bg)(E);E&&0!==+E&&!t.gt(e)?(ce(),Z(!1)):Z(!0)}),[E,s,T,S]),Object(i.useEffect)((function(){F(""),D("")}),[s,g,w]),Object(i.useEffect)((function(){a.isConnected()&&se()}),[a.detail,w,N]),Object(O.jsxs)("div",{className:"operate-liquidity",children:[Object(O.jsx)("div",{className:"add-input",children:Object(O.jsx)(b.a,{value:E,unit:ne,onChange:function(e){F(e)},inputWidth:"237px",styles:{"min-width":"332px"}})}),"add"===s&&Object(O.jsxs)("div",{className:"wallet-balance",children:[n["wallet-balance"],": ",Object(O.jsx)(h.a,{value:S,displayType:"text",decimalScale:2})," ",w]}),"remove"===s&&Object(O.jsxs)("div",{className:"wallet-balance",children:[n["staked-balance"],": ",Object(O.jsx)(h.a,{value:T.totalShares,displayType:"text",decimalScale:2})," ",ne]}),"remove"===s&&Object(O.jsx)("div",{children:Object(O.jsx)(f.a,{getLang:t,lang:n,baseToken:w,wallet:a,penalty:M,isB0Staked:G})}),Object(O.jsx)("div",{className:"check-proportion",children:Object(O.jsx)(j.a,{outline:!0,defaultValue:U,onChange:function(e){var t="add"===s?S:T.totalShares,a=Object(p.F)(e,t);D(e),F(a),D(e),L("100%"===e)},bgColor:" rgba(85, 119, 253, 0.1)",width:77,height:40})}),Object(O.jsx)("div",{className:"information",children:0!==+E&&Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:"percentage",children:[Object(O.jsx)("div",{className:"info-box-title",children:n["my-liquidity-percentage"]}),Object(O.jsxs)("div",{className:"info-box-num",children:[Object(O.jsx)(h.a,{allowZero:!0,width:"80px",value:T.percent,decimalScale:2,suffix:"%"})," ->  ",Object(O.jsx)(h.a,{width:"80px",allowZero:!0,value:100*ae.percentage1,decimalScale:2,suffix:"%"})]})]}),Object(O.jsxs)("div",{className:"staked-balance",children:[Object(O.jsx)("div",{className:"info-box-title",children:n["staked-balance"]}),Object(O.jsxs)("div",{className:"info-box-num",children:[Object(O.jsx)(h.a,{width:"80px",allowZero:!0,value:T.formatShares,decimalScale:2})," -> ",Object(O.jsx)(h.a,{width:"80px",allowZero:!0,value:ae.shares1,decimalScale:2}),"v2"===y||"v3"===y||"v3_lite"===y?" "+w:" "+n.shares]})]})]})}),Object(O.jsxs)("div",{className:"add-remove-btn",children:["add"===s&&Object(O.jsx)(u.a,{alert:Y,disabled:z,fontWeight:"bold",onClick:le,bToken:w,pool:k,wallet:a,bTokenId:g,fontSize:"18",type:x.o,width:"331",label:n["add-liquidity"],lang:n}),"remove"===s&&Object(O.jsx)(u.a,{alert:Y,disabled:z,fontWeight:"bold",onClick:oe,bToken:w,pool:k,type:x.o,wallet:a,bTokenId:g,fontSize:"18",width:"331",label:n["remove-liquidity"],lang:n})]})]})}var k=a(1368),y=a(102),w=a(167),N=(a(2061),a(1625),a(456)),S=a(451),T=a(454),C=a(450),I=a(453),q=a.p+"static/media/deri.520d2449.svg",E=a(1391),F=a(455),_=a(1229),$=a(287),B=a(162),L=y[v.DeriEnv.get()].chainInfo;function H(e){var t=e.wallet,a=e.chainId,n=e.nowApy,s=e.poolInfo,r=e.address,b=e.nowToken,u=e.lang,j=e.version,x=e.type,v=e.poolConfig,f=e.symbols,g=Object(i.useState)("show"),k=Object(o.a)(g,2),y=k[0],w=k[1],N=Object(i.useState)(),S=Object(o.a)(N,2),T=S[0],C=S[1],I=Object(c.c)(),q=function(){var e=Object(l.a)(d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("poolConfig",v),!v){e.next=7;break}return e.next=4,v.getVenusEarned(t,r);case 4:a=e.sent,C(a=+a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(l.a)(d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.request("claimXVSLp",[t.detail.chainId,r,t.detail.account],{includeResponse:!0,write:!0,subject:u["claim-XVS"]});case 2:if((a=e.sent)&&a.success){e.next=9;break}if(""!==a.response.transactionHash){e.next=6;break}return e.abrupt("return",!1);case 6:I.error("".concat(u["transaction-failed"]," : ").concat(a.response.error),{timeout:3e5,isTransaction:!0,transactionHash:a.response.transactionHash,link:"".concat(t.blockExploreUrl,"/tx/").concat(a.response.transactionHash),title:u["claim-reward-executed"]}),e.next=10;break;case 9:I.success(u["claim-XVS-reward"],{timeout:8e3,isTransaction:!0,transactionHash:a.response.data.transactionHash,link:"".concat(t.blockExploreUrl,"/tx/").concat(a.response.data.transactionHash),title:u["claim-reward-failed"]});case 10:q();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){if(t.isConnected()&&("v3"===j||"v3_lite"===j)){var e;return q(),e=window.setInterval((function(){q()}),18e4),function(){e&&clearInterval(e)}}}),[t,t.detail,v]),Object(O.jsxs)("div",{className:"pool-info",children:[Object(O.jsxs)("div",{className:"pool-info-title",children:[Object(O.jsx)("div",{className:"pool-info-title-text",children:u["pool-info"]}),Object(O.jsxs)("div",{className:"down-up",children:["show"===y&&Object(O.jsx)("span",{onClick:function(){return w("hide")},children:Object(O.jsx)("img",{className:"up-icon",alt:"",src:$.default})}),"hide"===y&&Object(O.jsx)("span",{onClick:function(){return w("show")},children:Object(O.jsx)("img",{alt:"",src:$.default})})]})]}),Object(O.jsxs)("div",{className:"'pool-info-text' ".concat(y),children:[Object(O.jsxs)("div",{className:"pool-info-text-one",children:["v2_lite_open"!==j&&Object(O.jsxs)("div",{className:"info-box",children:[Object(O.jsx)("div",{className:"info-box-title",children:u.apy}),Object(O.jsxs)("div",{className:"info-box-num",children:["v3"!==j&&"v3_lite"!==j&&Object(O.jsx)(h.a,{value:s.apy,displayType:"text",decimalScale:2,suffix:"%"}),("v3"===j||"v3_lite"===j)&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(_.a,{text:Object(O.jsx)(h.a,{width:"50px",value:n.apy,displayType:"text",decimalScale:2,suffix:"%"}),tip:u["deri-apy"]}),"\xa0 +  \xa0  ",Object(O.jsx)(_.a,{text:Object(O.jsx)(h.a,{width:"50px",value:n.supplyApy,displayType:"text",decimalScale:2,suffix:"%"}),tip:42161!==+a?u["venus-suppy-apy"]:u["aave-suppy-apy"]}),"  \xa0 ",42161!==+a&&"+","  \xa0",42161!==+a&&Object(O.jsx)(_.a,{text:Object(O.jsx)(h.a,{width:"50px",value:n.xvsApy,displayType:"text",decimalScale:2,suffix:"%"}),tip:u["xvs-distribution-apy"]})]})]})]}),Object(O.jsxs)("div",{className:"info-box",children:[Object(O.jsx)("div",{className:"info-box-title",children:u["pool-liquidity"]}),Object(O.jsxs)("div",{className:"info-box-num",children:[Object(O.jsx)(h.a,{value:s.total,displayType:"text",decimalScale:2,thousandSeparator:!0})," ","v3"===j||"v3_lite"===j?56===+a||97===+a?"BUSD":"USDC":b]})]}),("v2"===j||"v3"===j||"v3_lite"===j)&&!("option"===x&&"v2"===j)&&Object(O.jsxs)("div",{className:"info-box",children:[Object(O.jsx)("div",{className:"info-box-title",children:u.multiplier}),Object(O.jsx)("div",{className:"info-box-num",children:s.multiplier})]}),Object(O.jsxs)("div",{className:"info-box",children:[Object(O.jsx)("div",{className:"info-box-title",children:u["my-liquidity-percentage"]}),Object(O.jsx)("div",{className:"info-box-num",children:Object(O.jsx)(h.a,{allowZero:!0,value:s.percent,decimalScale:2,suffix:"%"})})]}),("v2"!==j&&"v3"!==j&&"v3_lite"!==j||"v2"===j&&"option"===x)&&Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:"info-box",children:[Object(O.jsx)("div",{className:"info-box-title",children:u["liquidity-share-value"]}),Object(O.jsxs)("div",{className:"info-box-num",children:[Object(O.jsx)(h.a,{allowZero:!0,decimalScale:6,value:s.shareValue,thousandSeparator:!0})," ",b]})]})}),Object(O.jsxs)("div",{className:"info-box",children:[Object(O.jsx)("div",{className:"info-box-title",children:u["staked-balance"]}),Object(O.jsxs)("div",{className:"info-box-num",children:[Object(O.jsx)(h.a,{allowZero:!0,value:s.formatShares,decimalScale:2}),"v2"!==j&&"v3"!==j&&"v3_lite"!==j||"option"===x&&"v2"===j?" "+u.shares:" "+b]})]}),("v2"!==j&&"v3"!==j&&"v3_lite"!==j||"v2"===j&&"option"===x)&&Object(O.jsxs)("div",{className:"info-box",children:[Object(O.jsx)("div",{className:"info-box-title"}),Object(O.jsxs)("div",{className:"info-box-num",children:[Object(O.jsx)(h.a,{allowZero:!0,decimalScale:2,value:s.values,thousandSeparator:!0})," ",b]})]}),("v2"===j||"v3"===j||"v3_lite"===j)&&!("option"===x&&"v2"===j)&&Object(O.jsxs)("div",{className:"info-box",children:[Object(O.jsx)("div",{className:"info-box-title",children:Object(O.jsx)(_.a,{multiline:!0,text:u["mining-pnl"],tip:u["mining-pnl-hover"],html:!0,element:Object(O.jsxs)("span",{children:[" ",Object(O.jsxs)("div",{children:[u["mining-pnl-hover-one"]," "]}),u["mining-pnl-hover"]," ",Object(O.jsxs)("div",{children:[Object(O.jsx)("a",{target:"_blank",href:"https://docs.deri.io/how-it-works/mining-amm-liquidity-mining#ii.-base-token-profit-with-market-risk",children:u["learn-more-pnl"]})," "]})," "]})})}),Object(O.jsxs)("div",{className:"info-box-num",children:[Object(O.jsx)(h.a,{allowZero:!0,prefix:" ",value:s.pnl,decimalScale:2}),"  ","v3"===j||"v3_lite"===j?56===+a||97===+a?"BUSD":"USDC":v&&v.bTokens[0].bTokenSymbol," (",Object(O.jsx)(h.a,{value:s.pnlPercentage,decimalScale:2,suffix:"%"}),")"]})]}),("v3"===j||"v3_lite"===j)&&(56===+a||97===+a)&&Object(O.jsxs)("div",{className:"info-box",children:[Object(O.jsx)("div",{className:"info-box-title",children:u["xvs-earned"]}),Object(O.jsxs)("div",{className:"info-box-num collect-box",children:[Object(O.jsx)(h.a,{value:T,decimalScale:2}),Object(O.jsx)(B.a,{onClick:E,className:"collect",label:u.collect})]})]})]}),Object(O.jsxs)("div",{className:"pool-info-text-two",children:["lp"!==x&&Object(O.jsxs)("div",{className:"info-box",children:[Object(O.jsx)("div",{className:"info-box-title",children:u.symbols}),Object(O.jsx)("div",{className:"info-box-num symbols",children:Object(O.jsx)(_.a,{tip:f,children:f})})]}),Object(O.jsxs)("div",{className:"info-box",children:[Object(O.jsx)("div",{className:"info-box-title",children:u["contract-address"]}),Object(O.jsx)("div",{className:"info-box-num",children:Object(O.jsx)("a",{target:"_blank",rel:"noreferrer",href:"".concat(L[a]&&L[a].viewUrl,"/address/").concat(r),children:Object(p.i)(r)})})]})]})]})]})}var A=a(29),U=a(1420);function D(e){var t=e.lang,a=e.address,n=e.checkoutBaseToken,s=e.nowToken,c=e.chainId,l=e.bTokenList,r=e.version,d=e.type,b=Object(i.useState)([]),u=Object(o.a)(b,2),j=u[0],x=u[1],m=function(e){e.target.src=F.default};return Object(i.useEffect)((function(){x(l)}),[l]),Object(O.jsxs)("div",{className:"select-basetoken-info",children:[Object(O.jsxs)("div",{className:"select-coin-title-search",children:[Object(O.jsxs)("div",{className:"select-coin-title",children:[" ",t["select-the-coin"]]}),Object(O.jsx)("div",{className:"search-box",children:Object(O.jsx)(U.a,{list:l,searchName:"bTokenSymbol",onChange:function(e){return x(e)}})})]}),Object(O.jsxs)("div",{className:"coin-search",children:[Object(O.jsx)("div",{className:"slide-icon left",children:Object(O.jsx)(A.a,{token:"arrow-left",width:"24",height:"24"})}),Object(O.jsxs)("div",{className:"v3"===r||"v3_lite"===r?"coin-list some-coin":"coin-list",children:["lp"!==d&&"v2_lite_open"!==r&&Object(O.jsx)(O.Fragment,{children:j.map((function(e,a){return Object(O.jsxs)("div",{className:s===e.bTokenSymbol?"coin-box checked-base":"coin-box",onClick:function(){n(e.bTokenId,e.bTokenSymbol)},children:[Object(O.jsxs)("div",{className:"base-apy-info",children:[Object(O.jsx)("div",{className:"btoken-logo ".concat(e.bTokenSymbol)}),Object(O.jsxs)("div",{className:"apy-base-staked",children:[Object(O.jsx)("div",{className:"base-name",children:e.bTokenSymbol}),Object(O.jsxs)("div",{className:"base-apy",children:[t.apy," \xa0 ",Object(O.jsx)(h.a,{width:"50px",value:e.apy,suffix:"%",displayType:"text",allowZero:!0,decimalScale:2}),("v3"===r||"v3_lite"===r)&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("span",{children:[" +  ",Object(O.jsx)(h.a,{width:"50px",value:e.supplyApy,suffix:"%",displayType:"text",allowZero:!0,decimalScale:2}),"  ",42161!==+c&&"+"]}),42161!==+c&&Object(O.jsx)(h.a,{width:"50px",value:e.xvsApy,suffix:"%",displayType:"text",allowZero:!0,decimalScale:2})]})]})]})]}),e.staked&&Object(O.jsx)("img",{src:E.a,alt:""})]})}))}),"v2_lite_open"===r&&Object(O.jsx)(O.Fragment,{children:j.map((function(e,a){return Object(O.jsxs)("div",{className:"coin-box checked-base",onClick:function(){n(e.bTokenId)},children:[Object(O.jsxs)("div",{className:"base-apy-info",children:[Object(O.jsx)("div",{className:"btoken-logo ".concat(e.bTokenSymbol),children:Object(O.jsx)("img",{alt:"",onError:m,src:"https://raw.githubusercontent.com/deri-finance/deri-open-zone/main/img/".concat(e.bTokenSymbol,".png")})}),Object(O.jsx)("div",{className:"apy-base-staked",children:Object(O.jsx)("div",{className:"base-name",children:e.bTokenSymbol})})]}),e.staked&&Object(O.jsxs)("div",{className:"stake",children:[Object(O.jsx)("img",{src:E.a,alt:""}),t.staked]})]})}))}),"lp"===d&&l.length&&Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("div",{className:"coin-box checked-base",children:Object(O.jsxs)("div",{className:"base-apy-info",children:[Object(O.jsxs)("div",{className:"lp-btoken-logo",children:[Object(O.jsx)("div",{className:"btoken-logo ".concat(l[0].bTokenSymbol)}),Object(O.jsx)("span",{className:"conect-logo",children:"+"}),Object(O.jsx)("div",{className:"btoken-logo ".concat(l[1].bTokenSymbol)})]}),Object(O.jsxs)("div",{className:"apy-base-staked",children:[Object(O.jsx)("div",{className:"base-name",children:s}),Object(O.jsxs)("div",{className:"base-apy",children:[Object(p.v)(a)&&Object(O.jsxs)(O.Fragment,{children:[t.apy," \xa0 ",Object(O.jsx)(h.a,{value:l[1].apy,suffix:"%",displayType:"text",allowZero:!0,decimalScale:2})]}),Object(p.C)(a)&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(_.a,{text:"".concat(t.apy," ").concat((+l[1].apy).toFixed(2)," %"),tip:t["deri-apy"]}),"\xa0 + \xa0 ",Object(O.jsx)(_.a,{text:"".concat(t.apy,"  ").concat((+l[1].lpApy).toFixed(2)," %"),tip:t["sushi-apy"]})]})]})]})]})})})]}),Object(O.jsx)("div",{className:"slide-icon right",children:Object(O.jsx)(A.a,{token:"arrow-right",width:"24",height:"24"})})]})]})}a(1634);var R=a(212),P=a(1418);const z=v.DeriEnv.get(),{chainInfo:Z}=y[z];t.default=Object(s.b)("wallet","poolManager")(Object(s.c)((function(e){let{lang:t,wallet:a={},poolManager:s,getLang:l}=e;const{version:o,chainId:r,address:d,type:b}=Object(n.i)(),u=Object(c.c)(),[j,x]=Object(i.useState)(),[f,y]=Object(i.useState)(""),[_,$]=Object(i.useState)(!1),[B,L]=Object(i.useState)(""),[A,U]=Object(i.useState)([]),[z,V]=Object(i.useState)({}),[W,M]=Object(i.useState)(0),[K,X]=Object(i.useState)({}),J=Object(w.a)(),[G,Q]=Object(i.useState)(""),[Y,ee]=Object(i.useState)(),[te,ae]=Object(i.useState)({}),[ie,ne]=Object(i.useState)(!1),[se,ce]=Object(i.useState)(0),[le,oe]=Object(i.useState)(0),[re,de]=Object(i.useState)(0),[be,ue]=Object(i.useState)(""),[je,pe]=Object(i.useState)(!1),he=Z[r]&&Z[r].name,xe=async()=>{if(a.isConnected()){let e=[a.detail.chainId,d,a.detail.account],t=null;B.isLp?t=await m.a.request("getLpWalletBalance",e):("v3"===o||"v3_lite"===o?e.push(j):e.push(f),"v2_lite_open"===o&&await v.openConfigListCache.update(),t=await m.a.request("getBTokenBalance",e)),ee(t)}},me=async()=>{let e=await m.a.request("getPendingReward",[a.detail.chainId,d,a.detail.account]);if(Object(p.x)(d)){X(e);let t=e.valid?e.amount:0;M(t)}else M(e)},ve=()=>{xe(),Oe(),ge()},fe=Object(i.useMemo)((()=>({[t.add]:{content:Object(O.jsx)(g,{getLang:l,poolConfig:B,isLp:b,wallet:a,afterTransaction:ve,version:o,bTokenId:f,address:d,lang:t,type:"add",poolInfo:z,baseToken:j,walletBalance:Y}),style:{background:"linear-gradient(200.74deg, rgba(97, 122, 255, 0.1) -4.65%, rgba(223, 229, 255, 0) 50.94%, rgba(85, 91, 237, 0.05) 105.4%)"},borderColor:"#203B60",icon:"add-icon",iconWidth:"25",iconHeight:"25",inicon:"inactive-add",direction:"tab-left"},[t.remove]:{content:Object(O.jsx)(g,{getLang:l,isLp:b,poolConfig:B,wallet:a,afterTransaction:ve,lang:t,address:d,type:"remove",bTokenId:f,poolInfo:z,balance:z,baseToken:j,version:o}),style:{background:"linear-gradient(200.74deg, rgba(97, 122, 255, 0.1) -4.65%, rgba(223, 229, 255, 0) 50.94%, rgba(85, 91, 237, 0.05) 105.4%)"},borderColor:"#203B60",icon:"remove-icon",iconWidth:"25",iconHeight:"25",iconMarginRight:"20",inicon:"inactive-remove",direction:"tab-right"}})),[t,l,B,b,a,o,f,d,j,Y,z]),Oe=async()=>{let e=null;if(B){let t,i,n,s,c,l,r=await B.getPoolInfo(a,B);if(r.bTokensApy&&r.bTokensLiq&&("v2"===o&&f?(c=r.bTokensApy.filter((e=>e.bTokenId===f)),t=c[0].apy,l=c[0].multiplier,s=r.bTokensLiq.filter((e=>e.bTokenId===f)),s=s[0].liquidity):"v2_lite_open"!==o&&"v3"!==o&&"v3_lite"!==o?(t=r.bTokensApy[0].apy,s=r.bTokensLiq[0].liquidity):"v3"!==o&&"v3_lite"!==o||(c=r.bTokensApy.filter((e=>e.bTokenSymbol===j)),c.length&&(t=c[0].apy,i=c[0].supplyApy,n=c[0].xvsApy,l=c[0].multiplier),s=r.bTokensLiq.filter((e=>e.bTokenSymbol===j)),s.length&&(s=s[0].liquidity)),e={total:s,apy:100*+t,supplyApy:100*+i,xvsApy:100*+n,multiplier:l}),a.isConnected()){let s=await B.getLiquidityInfo(a,d,B.version,B.isLp,b,j,f);s&&(e=s,"v3"!==o&&"v3_lite"!==o||(e.supplyApy=100*+i,e.xvsApy=100*+n),e.apy=100*+t,e.multiplier=l)}V(e)}},ge=async()=>{if(a.isConnected()&&B){let e=await B.getIsStaked(a,B);if(e.bTokens){A.map((t=>{if("v2"===o&&"option"!==b)t.staked=e.bTokens.filter((e=>e.bTokenId===t.bTokenId))[0].isStaked;else if("v3"===o||"v3_lite"===o){let a=e.bTokens.filter((e=>e.bTokenSymbol===t.bTokenSymbol));t.staked=!!a.length&&a[0].isStaked}else t.staked=e.isStaked;return t}))}let t=[];if(A.forEach(((e,a)=>{if(e.staked)return t.push(e),void A.splice(a,1)})),A.unshift(...t),A.length){let e=A[0].bTokenSymbol;Object(p.v)(d)?e="PANCAKE-LP":Object(p.C)(d)&&(e="DERI-USDT SLP");let t=A[0].bTokenId;x(e),y(t)}}};return Object(i.useEffect)((()=>{if(a.detail.chainId&&a.detail.chainId!==r&&a.switchNetwork(J[r]),a.isConnected()){let e=window.setInterval(me,3e4);return me(),()=>clearInterval(e)}}),[a.detail,a]),Object(i.useEffect)((()=>{(async()=>{await s.load();let e=s.pools;"lp"===b&&(await s.loadDoubleMingingPool(),e=s.lpPools),"v2_lite_open"===o&&(await s.loadOpen(),e=s.openPools),e=e.filter((e=>e.address===d)),e=e[0];let t=e.bTokens[0].bTokenSymbol;Object(p.v)(d)?t="PANCAKE-LP":Object(p.C)(d)&&(t="DERI-USDT SLP");let a=e.symbols.map((e=>{let t=[];return t.push(e.symbol),t}));a=a.join(","),Q(a),L(e),U(e.bTokens)})()}),[]),Object(i.useEffect)((()=>{if(ee(""),A.length&&(j||f)){let e,t={};if("v2"!==o){t=A.filter((e=>e.bTokenSymbol===j))[0]}else if("v2"===o){t=A.filter((e=>e.nowTokenId===f))[0]}ae(t),"v2"===o&&"option"!==b?f&&(e=A.filter((e=>e.bTokenId===f))[0].staked):"lp"!==b&&(e=A.filter((e=>e.bTokenSymbol===j))[0].staked),$(e)}}),[A,j,f]),Object(i.useEffect)((()=>{(async()=>{if(B){let e=await B.getPoolInfo(a,B);e.bTokensApy&&A.map((t=>{if("v2"===o)t.apy=100*+e.bTokensApy.filter((e=>e.bTokenId===t.bTokenId))[0].apy;else if("v2_lite_open"!==o&&"v3"!==o&&"v3_lite"!==o)t.apy=100*+e.bTokensApy[0].apy,Object(p.C)(d)&&(t.lpApy=e.lpApy);else if("v3"===o||"v3_lite"===o){let a=e.bTokensApy.find((e=>e.bTokenSymbol===t.bTokenSymbol));a&&(t.apy=100*+a.apy,t.supplyApy=(100*+a.supplyApy).toFixed(3),t.xvsApy=100*+a.xvsApy)}return t}))}})()}),[B,A]),Object(i.useEffect)((()=>{Oe(),xe()}),[f,B,a.detail.account,j]),Object(i.useEffect)((()=>{ge()}),[B,a.detail.account,A]),Object(i.useEffect)((()=>{if(a.isConnected()){let e=Object(p.m)("poolClaim"),t=sessionStorage.getItem("poolGuideThree");"true"===e?ne(!1):"3"===t&&ne(!0)}}),[a,a.detail]),Object(i.useEffect)((()=>{let e=null;return e=window.setInterval((()=>{let e=28800,a=parseInt(Date.now()/1e3),i=parseInt(a/e)*e,n=i+e-a,s=parseInt(n/3600),c=parseInt(n%3600/60),l=parseInt(n%60);ce(i),oe(i+e),de(a),ue(`${s} ${t.h} ${c} ${t.m} ${l} ${t.s}`)}),1e3),()=>{e&&clearInterval(e)}}),[]),Object(O.jsxs)("div",{className:"pool-detail",children:[Object(O.jsx)("div",{className:"back-pool",children:Object(O.jsxs)("div",{className:"icon-back",onClick:()=>{window.history.back(-1)},children:[Object(O.jsx)("img",{alt:"",src:N.default}),Object(O.jsx)("span",{children:t.back})]})}),Object(O.jsxs)("div",{className:"pool-deatail-info",children:[Object(O.jsxs)("div",{className:"pool-detail-basetoken-info",children:[Object(O.jsxs)("div",{className:"pool-info-text",children:[Object(O.jsxs)("div",{className:"pool-network-type",children:[Object(O.jsx)("div",{className:"network-logo",children:Object(O.jsx)("img",{alt:"",src:(e=>{let t,a=+e;return 56===a||97===a?t=S.default:137===a?t=T.default:1===a?t=C.default:42161!==a&&421611!==a||(t=I.default),t})(r)})}),Object(O.jsxs)("div",{className:"pool-type-network-text",children:[Object(O.jsxs)("div",{className:"pool-type-text",children:["0xD2D950e338478eF7FeB092F840920B3482FcaC40"!==d&&Object(O.jsxs)(O.Fragment,{children:[t[B.type]," ",t[B.zone]]}),"0xD2D950e338478eF7FeB092F840920B3482FcaC40"===d&&Object(O.jsx)(O.Fragment,{children:t[B.zone]})]}),Object(O.jsx)("div",{className:"pool-network-text",children:"BSC"===he?"BNB Chain":he})]})]}),Object(O.jsxs)("div",{className:"pool-des",children:["lp"!==b&&t["amm-pool-des"],"clp"===o&&Object(O.jsx)(O.Fragment,{children:t["deri-pancake-pool"]}),"slp"===o&&Object(O.jsx)(O.Fragment,{children:t["deri-sushi-pool"]}),Object(O.jsx)("br",{}),"lp"!==b?Object(O.jsx)("a",{rel:"norelerror",target:"_blank",href:"https://docs.deri.io/library/faqs/mining-faq#is-the-amm-liquidity-mining-on-deri-pools-risk-free",children:Object(O.jsxs)("span",{className:"learn-more",children:[" ",t["learn-more"]]})}):Object(O.jsx)("a",{rel:"norelerror",target:"_blank",href:"https://docs.deri.io/library/faqs/mining-faq#is-dex-liquidity-mining-on-sushiswap-sushiswap-onsen-and-pancakeswap-deri-risk-free",children:Object(O.jsxs)("span",{className:"learn-more",children:[" ",t["learn-more"]]})})]})]}),Object(O.jsx)(D,{lang:t,chainId:r,address:d,checkoutBaseToken:async(e,t)=>{let a;a="v3"!==o&&"v3_lite"!==o?B.bTokens.filter((t=>t.bTokenId===e)):B.bTokens.filter((e=>e.bTokenSymbol===t)),V({}),y(e),ee(""),x(a[0].bTokenSymbol),$()},nowToken:j,bTokenList:A,version:o,type:b})]}),Object(O.jsxs)("div",{className:"pool-detail-add-remove-info",children:[Object(O.jsxs)("div",{className:"mining-deri-liquidity",children:[Object(O.jsxs)("div",{className:"btoken-liquidity",children:["lp"!==b&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:`btoken-logo ${j}`,children:"v2_lite_open"===o&&Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("img",{alt:"",onError:e=>{e.target.src=F.default},src:`https://raw.githubusercontent.com/deri-io/deri-open-zone/main/img/${j}.png`})})}),Object(O.jsxs)("div",{className:"manage-stake",children:[Object(O.jsxs)("div",{className:"manage",children:[t.manage," ",j," ",t.liquidity]}),_&&Object(O.jsxs)("div",{className:"stake",children:[Object(O.jsx)("img",{src:E.a,alt:""}),t.staked]})]})]}),"lp"===b&&A.length&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"lp-btoken-logo",children:[Object(O.jsx)("div",{className:`btoken-logo ${A[0].bTokenSymbol}`}),Object(O.jsx)("span",{className:"conect-logo",children:"+"}),Object(O.jsx)("div",{className:`btoken-logo ${A[1].bTokenSymbol}`})]}),Object(O.jsxs)("div",{className:"manage-stake",children:[Object(O.jsxs)("div",{className:"manage",children:[t.manage," ",j," ",t.liquidity]}),_&&Object(O.jsxs)("div",{className:"stake",children:[Object(O.jsx)("img",{src:E.a,alt:""}),t.staked]})]})]})]}),Object(O.jsx)("div",{className:"deri-current-epoch",children:"v2_lite_open"!==o&&B.rewarded&&Object(O.jsxs)(O.Fragment,{children:[Object(p.x)(d)&&Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:"deri-num-slider",children:[Object(O.jsx)("div",{className:"deri-cliam-remaining",children:be}),Object(O.jsx)("div",{className:"deri-claim-slider",children:Object(O.jsx)(P.a,{startTimestamp:se,nowTimestamp:re,endTimestamp:le})}),Object(O.jsx)("div",{className:"deri-claim-pool-num",children:l("deri-claim-pool-num",{num:+K.lp?(+K.lp).toFixed(4):0})})]})}),Object(O.jsx)("div",{className:Object(p.x)(d)?"mining-pool-claim epoch-pool":"mining-pool-claim",children:Object(O.jsxs)("div",{className:"mining-claim-info",children:[Object(O.jsxs)("span",{children:[" ",t["you-have"]]}),Object(O.jsxs)("span",{className:(0===+W?"no-deri":"")+" mining-pool-num",onClick:async()=>{if(0===+W)return void u.error(t["no-deri-to-claim-yet"]);if(Object(p.x)(d)){if(parseInt(Date.now()/1e3)%28800<1800)return void u.error(t["claiming-DERI-is-disabled-during-first-30-minutes-of-each-epoch"])}pe(!0);let e=await m.a.request("claimReward",[a.detail.chainId,d,a.detail.account],{includeResponse:!0,write:!0,subject:t["claim-deri-title"]});return me(),pe(!1),e.success?(M(0),u.success(t["claim-deri-reward"],{timeout:8e3,isTransaction:!0,transactionHash:e.response.data.transactionHash,link:`${a.blockExploreUrl}/tx/${e.response.data.transactionHash}`,title:t["claim-reward-executed"]}),M(0),!0):(""===e.response.transactionHash||u.error(`${t["transaction-failed"]} : ${e.response.error}`,{timeout:3e5,isTransaction:!0,transactionHash:e.response.transactionHash,link:`${a.blockExploreUrl}/tx/${e.response.transactionHash}`,title:t["claim-reward-failed"]}),!1)},children:[je&&Object(O.jsx)(R.a,{}),Object(O.jsx)(h.a,{value:W,decimalScale:2}),Object(O.jsx)("img",{src:q})]}),Object(O.jsx)("span",{children:t["claim-in-pool"]})]})})]})})]}),Object(O.jsxs)("div",{className:"mining-add-remove-liquidity",children:[Object(O.jsx)(H,{wallet:a,nowApy:te,poolInfo:z,chainId:r,address:d,nowToken:j,lang:t,poolInfo:z,version:o,type:b,poolConfig:B,symbols:G}),Object(O.jsx)("div",{className:"add-remove-liquidity",children:Object(O.jsx)(k.a,{tabSet:fe,iconMarginRight:"20",width:379,size:18,inactiveBgColor:"#0c192d",icon:"",borderBottom:!0,divider:!0})})]})]})]})]})})))}}]);
//# sourceMappingURL=19.8bccd9f3.chunk.js.map